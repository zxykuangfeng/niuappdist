"use strict";const e=require("../common/vendor.js"),a=require("../locale/i18n.js"),o=require("../stores/system.js"),r=require("./auth.js"),s=require("./common.js"),t=require("../app/api/auth.js");require("../stores/config.js");const p=require("../hooks/useShare.js"),n=[],d=()=>{const{setShare:e}=p.useShare(),a=["addon/cms/pages/detail","addon/shop/pages/goods/detail","addon/shop/pages/point/detail","addon/shop_fenxiao/pages/promote_code","addon/shop_fenxiao/pages/goods","addon/shop_fenxiao/pages/zone","addon/shop_giftcard/pages/detail","addon/shop_giftcard/pages/give","app/pages/index/diy","app/pages/index/diy_form","app/pages/friendspay/share","app/pages/friendspay/money"];s.currRoute()&&(a.includes(s.currRoute()||"")||e())},i=a=>{n.includes(a.path)&&(o.useSystemStore().$patch((e=>{e.currTabbar=a})),e.index.switchTab({url:"/app/pages/index/tabbar"}))};exports.launchInterceptor=()=>{const o=e.index.getLaunchOptionsSync();o.path=`/${o.path}`,s.setThemeColor(o.path),a.language.loadAllLocaleMessages("app",e.index.getLocale()),r.checkNeedLogin(o),o.query&&o.query.mid&&e.index.setStorageSync("pid",o.query.mid),d(),s.getToken()&&t.memberLog({route:o.path,params:JSON.stringify(o.query||{}),pre_route:""}),i(o)},exports.redirectInterceptor=o=>{var p;o.path=`/${o.path}`,s.setThemeColor(o.path),-1!=o.path.indexOf("addon")&&a.language.loadAllLocaleMessages("addon",e.index.getLocale()),r.checkNeedLogin(o),d(),s.getToken()&&t.memberLog({route:o.path,params:JSON.stringify(o.query),pre_route:null==(p=getCurrentPages()[0])?void 0:p.route}),i(o)},exports.tabbarJson=n;
