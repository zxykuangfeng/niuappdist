"use strict";const e=require("../common/vendor.js"),t=require("../app/api/system.js");require("../app/stores/diy.js"),require("../stores/member.js"),require("../stores/system.js"),require("../stores/config.js");const s=new class{constructor(){}init(s=null){t.getWechatSdkConfig({url:"ios"==e.index.getSystemInfoSync().platform?e.index.getStorageSync("initUrl"):location.href}).then((e=>{const{data:t}=e;wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["chooseWXPay","updateAppMessageShareData","updateTimelineShareData","scanQRCode","getLocation"]}),s&&s()}))}pay(e){wx.ready((()=>{wx.chooseWXPay(e)}))}share(e){wx.ready((()=>{wx.updateAppMessageShareData(e),wx.updateTimelineShareData(e)}))}scanQRCode(e){wx.ready((()=>{wx.scanQRCode({needResult:1,scanType:["qrCode"],success:function(t){"function"==typeof e&&e(t)}})}))}getLocation(e){wx.ready((function(){wx.getLocation({type:"gcj02",success:function(t){"function"==typeof e&&e(t)}})}))}transfer(t,s){wx.canIUse("requestMerchantTransfer")?wx.requestMerchantTransfer({...t,success:e=>{"function"==typeof s&&s(e)},cancel:e=>{"function"==typeof s&&s(e)},fail:e=>{"function"==typeof s&&s(e)}}):e.index.showToast({title:"你的微信版本过低，请更新至最新版本。",icon:"none"})}};exports.wechat=s;
