"use strict";const e=require("../../../../common/vendor.js"),t={name:"u-tabs",mixins:[e.mpMixin,e.mixin,e.props$33],data:()=>({firstTime:!0,scrollLeft:0,scrollViewWidth:0,lineOffsetLeft:0,tabsRect:{left:0},innerCurrent:0,moving:!1}),watch:{current:{immediate:!0,handler(e,t){e!==this.innerCurrent&&(this.innerCurrent=e,this.$nextTick((()=>{this.resize()})))}},list(){this.$nextTick((()=>{this.resize()}))}},computed:{textStyle(){return t=>{const i={},s=t===this.innerCurrent?e.addStyle(this.activeStyle):e.addStyle(this.inactiveStyle);return this.list[t].disabled&&(i.color="#c8c9cc"),e.deepMerge(s,i)}},propsBadge:()=>e.defProps.badge},async mounted(){this.init()},emits:["click","change"],methods:{addStyle:e.addStyle,addUnit:e.addUnit,setLineLeft(){const t=this.list[this.innerCurrent];if(!t)return;let i=this.list.slice(0,this.innerCurrent).reduce(((e,t)=>e+t.rect.width),0);const s=e.getPx(this.lineWidth);this.lineOffsetLeft=i+(t.rect.width-s)/2,this.firstTime&&setTimeout((()=>{this.firstTime=!1}),10)},animation(e,t=0){},clickHandler(e,t){this.$emit("click",{...e,index:t},t),e.disabled||(this.innerCurrent=t,this.resize(),this.$emit("change",{...e,index:t},t))},init(){e.sleep().then((()=>{this.resize()}))},setScrollLeft(){const t=this.list[this.innerCurrent],i=this.list.slice(0,this.innerCurrent).reduce(((e,t)=>e+t.rect.width),0),s=e.sys().windowWidth;let r=i-(this.tabsRect.width-t.rect.width)/2-(s-this.tabsRect.right)/2+this.tabsRect.left/2;r=Math.min(r,this.scrollViewWidth-this.tabsRect.width),this.scrollLeft=Math.max(0,r)},resize(){0!==this.list.length&&Promise.all([this.getTabsRect(),this.getAllItemRect()]).then((([e,t=[]])=>{this.tabsRect=e,this.scrollViewWidth=0,t.map(((e,t)=>{this.scrollViewWidth+=e.width,this.list[t].rect=e})),this.setLineLeft(),this.setScrollLeft()}))},getTabsRect(){return new Promise((e=>{this.queryRect("u-tabs__wrapper__scroll-view").then((t=>e(t)))}))},getAllItemRect(){return new Promise((e=>{const t=this.list.map(((e,t)=>this.queryRect(`u-tabs__wrapper__nav__item-${t}`,!0)));Promise.all(t).then((t=>e(t)))}))},queryRect(e,t){return new Promise((t=>{this.$uGetRect(`.${e}`).then((e=>{t(e)}))}))}}};if(!Array){e.resolveComponent("u-badge")()}Math;const i=e._export_sfc(t,[["render",function(t,i,s,r,a,n){return{a:e.f(t.list,((i,s,r)=>({a:e.t(i[t.keyName]),b:e.n(i.disabled&&"u-tabs__wrapper__nav__item__text--disabled"),c:e.s(n.textStyle(s)),d:"caa7e19d-0-"+r,e:e.p({show:!(!i.badge||!(i.badge.show||i.badge.isDot||i.badge.value)),isDot:i.badge&&i.badge.isDot||n.propsBadge.isDot,value:i.badge&&i.badge.value||n.propsBadge.value,max:i.badge&&i.badge.max||n.propsBadge.max,type:i.badge&&i.badge.type||n.propsBadge.type,showZero:i.badge&&i.badge.showZero||n.propsBadge.showZero,bgColor:i.badge&&i.badge.bgColor||n.propsBadge.bgColor,color:i.badge&&i.badge.color||n.propsBadge.color,shape:i.badge&&i.badge.shape||n.propsBadge.shape,numberType:i.badge&&i.badge.numberType||n.propsBadge.numberType,inverted:i.badge&&i.badge.inverted||n.propsBadge.inverted,customStyle:"margin-left: 4px;"}),f:s,g:e.o((e=>n.clickHandler(i,s))),h:`u-tabs__wrapper__nav__item-${s}`,i:e.n(`u-tabs__wrapper__nav__item-${s}`),j:e.n(i.disabled&&"u-tabs__wrapper__nav__item--disabled")}))),b:e.s(n.addStyle(t.itemStyle)),c:e.s({flex:t.scrollable?"":1}),d:e.s({width:n.addUnit(t.lineWidth),transform:`translate(${a.lineOffsetLeft}px)`,transitionDuration:`${a.firstTime?0:t.duration}ms`,height:n.addUnit(t.lineHeight),background:t.lineColor,backgroundSize:t.lineBgSize}),e:t.scrollable,f:a.scrollLeft}}],["__scopeId","data-v-caa7e19d"]]);tt.createComponent(i);
