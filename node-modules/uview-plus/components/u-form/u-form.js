"use strict";const e=require("../../../../common/vendor.js");e.Schema.warning=function(){};const t={name:"u-form",mixins:[e.mpMixin,e.mixin,e.props$6],provide(){return{uForm:this}},data:()=>({formRules:{},validator:{},originalModel:null}),watch:{rules:{immediate:!0,handler(e){this.setRules(e)}},propsChange(e){var t;(null==(t=this.children)?void 0:t.length)&&this.children.map((e=>{"function"==typeof e.updateParentData&&e.updateParentData()}))},model:{immediate:!0,handler(t){this.originalModel||(this.originalModel=e.deepClone(t))}}},computed:{propsChange(){return[this.errorType,this.borderBottom,this.labelPosition,this.labelWidth,this.labelAlign,this.labelStyle]}},created(){this.children=[]},methods:{setRules(t){0!==Object.keys(t).length&&(this.formRules=t,this.validator=new e.Schema(t))},resetFields(){this.resetModel()},resetModel(t){this.children.map((t=>{const i=null==t?void 0:t.prop,s=e.getProperty(this.originalModel,i);e.setProperty(this.model,i,s)}))},clearValidate(e){e=[].concat(e),this.children.map((t=>{(void 0===e[0]||e.includes(t.prop))&&(t.message=null)}))},async validateField(t,i,s=null){this.$nextTick((()=>{const n=[];t=[].concat(t),this.children.map((i=>{const r=[];if(t.includes(i.prop)){const t=e.getProperty(this.model,i.prop),o=i.prop.split("."),l=o[o.length-1],a=this.formRules[i.rule||i.prop];if(!a)return;const h=[].concat(a);for(let d=0;d<h.length;d++){const o=h[d],a=[].concat(null==o?void 0:o.trigger);if(s&&!a.includes(s))continue;new e.Schema({[l]:o}).validate({[l]:t},((t,s)=>{var o;e.test.array(t)&&(n.push(...t),r.push(...t)),i.message=(null==(o=r[0])?void 0:o.message)?r[0].message:null}))}}})),"function"==typeof i&&i(n)}))},validate(t){return new Promise(((t,i)=>{this.$nextTick((()=>{const s=this.children.map((e=>e.prop));this.validateField(s,(s=>{s.length?("toast"===this.errorType&&e.toast(s[0].message),i(s)):t(!0)}))}))}))}}};const i=e._export_sfc(t,[["render",function(e,t,i,s,n,r){return{}}]]);tt.createComponent(i);
