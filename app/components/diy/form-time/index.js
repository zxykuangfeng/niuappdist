"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../utils/common.js"),t=require("../../../../locale/index.js"),o=require("../../../stores/diy.js");if(require("../../../../utils/pages.js"),require("../../../../stores/member.js"),require("../../../api/member.js"),require("../../../../utils/request.js"),require("../../../api/auth.js"),require("../../../../stores/config.js"),require("../../../../stores/system.js"),require("../../../api/system.js"),require("../../../../locale/i18n.js"),require("../../../../locale/language.js"),require("../../../../hooks/useLogin.js"),!Array){e.resolveComponent("u-datetime-picker")()}Math;const u=e.defineComponent({__name:"index",props:["component","index","global"],setup(u,{expose:l}){const n=u,a=o.useDiyStore(),d=e.ref(!1);e.ref(!1);const i=e.ref(!1),f=e.ref(null),m=e.computed((()=>"decorate"==a.mode?a.value[n.index]:n.component)),s=e.computed((()=>n.global)),c=()=>{let e=[];if(m.value.autofill){let r={title:"已自动填充"};e.push(r)}return e.forEach(((e,r,t)=>{if(r!=t.length-1){let e={title:"|"};t.push(e)}})),e},v=e.computed((()=>{var e="";return m.value.field.value?(e=m.value.field.value,m.value.field.value=e):m.value.defaultControl?("current"==m.value.timeWay?e=x():"diy"==m.value.timeWay&&(e=m.value.field.default),m.value.field.value=e):e=m.value.placeholder,e})),p=e.computed((()=>{var e="";return e+="position:relative;",m.value.componentStartBgColor&&m.value.componentEndBgColor?e+=`background:linear-gradient(${m.value.componentGradientAngle},${m.value.componentStartBgColor},${m.value.componentEndBgColor});`:m.value.componentStartBgColor?e+="background-color:"+m.value.componentStartBgColor+";":m.value.componentEndBgColor&&(e+="background-color:"+m.value.componentEndBgColor+";"),m.value.componentBgUrl&&(e+=`background-image:url('${r.img(m.value.componentBgUrl)}');`,e+="background-size: cover;background-repeat: no-repeat;"),m.value.topRounded&&(e+="border-top-left-radius:"+2*m.value.topRounded+"rpx;"),m.value.topRounded&&(e+="border-top-right-radius:"+2*m.value.topRounded+"rpx;"),m.value.bottomRounded&&(e+="border-bottom-left-radius:"+2*m.value.bottomRounded+"rpx;"),m.value.bottomRounded&&(e+="border-bottom-right-radius:"+2*m.value.bottomRounded+"rpx;"),e}));e.onMounted((()=>{g(),"decorate"==a.mode&&e.watch((()=>m.value),((e,r)=>{e&&e.componentName}))}));const g=()=>{},y=()=>{"decorate"!==a.mode&&(i.value=!0)},b=e=>{m.value.field.value=e.value,d.value=!1},x=(e="")=>{let r=e?new Date(e):new Date,t="";return t=`${String(r.getHours()).padStart(2,"0")}:${String(r.getMinutes()).padStart(2,"0")}`,t};return l({verify:()=>{const e={code:!0,message:""};return m.value.field.required&&""==m.value.field.value&&(e.code=!1,e.message=`请选择${m.value.placeholder}`),f.value=e,e},reset:()=>{m.value.field.value=""}}),(r,o)=>e.e({a:e.unref(m).viewFormDetail},e.unref(m).viewFormDetail?e.e({b:"style-1"==e.unref(s).completeLayout},"style-1"==e.unref(s).completeLayout?{c:e.t(e.unref(m).field.name),d:e.t(e.unref(m).field.value)}:{},{e:"style-2"==e.unref(s).completeLayout},"style-2"==e.unref(s).completeLayout?{f:e.t(e.unref(m).field.name),g:e.t(e.unref(m).field.value)}:{}):e.e({h:"style-1"==e.unref(s).completeLayout},"style-1"==e.unref(s).completeLayout?e.e({i:e.t(e.unref(m).field.name),j:e.unref(m).textColor,k:2*e.unref(m).fontSize+"rpx",l:e.unref(m).fontWeight,m:e.t(e.unref(m).field.required?"*":""),n:"decorate"==e.unref(a).mode&&e.unref(m).isHidden},"decorate"==e.unref(a).mode&&e.unref(m).isHidden?{o:e.t(e.unref(t.t)("diyForm.hidden"))}:{},{p:e.unref(m).field.remark.text},e.unref(m).field.remark.text?{q:e.t(e.unref(m).field.remark.text),r:e.unref(m).field.remark.color,s:2*e.unref(m).field.remark.fontSize+"rpx"}:{},{t:f.value&&!f.value.code},f.value&&!f.value.code?{v:e.t(f.value.message)}:{},{w:e.t(e.unref(v)),x:e.unref(m).field.value||e.unref(m).defaultControl?"":1,y:e.unref(m).textColor,z:2*e.unref(m).fontSize+"rpx",A:e.o((e=>d.value=!0)),B:c().length},c().length?{C:e.f(c(),((r,t,o)=>({a:e.t(r.title),b:t,c:e.o((e=>{r.type}))})))}:{}):{},{D:"style-2"==e.unref(s).completeLayout},"style-2"==e.unref(s).completeLayout?e.e({E:"decorate"==e.unref(a).mode&&e.unref(m).isHidden},"decorate"==e.unref(a).mode&&e.unref(m).isHidden?{F:e.t(e.unref(t.t)("diyForm.hidden"))}:{},{G:e.unref(m).field.required},e.unref(m).field.required?{H:e.t(e.unref(m).field.required?"*":"")}:{},{I:e.t(e.unref(m).field.name),J:e.unref(m).textColor,K:2*e.unref(m).fontSize+"rpx",L:e.unref(m).fontWeight,M:"left"==e.unref(s).completeAlign?1:"",N:"right"==e.unref(s).completeAlign?1:"",O:e.t(e.unref(v)),P:e.unref(m).field.value||e.unref(m).defaultControl?"":1,Q:e.unref(m).textColor,R:2*e.unref(m).fontSize+"rpx",S:e.o((e=>d.value=!0)),T:e.o(y),U:e.unref(s).borderControl?"":1,V:f.value&&!f.value.code},f.value&&!f.value.code?{W:e.t(f.value.message)}:{},{X:e.unref(m).field.remark.text},e.unref(m).field.remark.text?{Y:e.t(e.unref(m).field.remark.text),Z:e.unref(m).field.remark.color,aa:2*e.unref(m).field.remark.fontSize+"rpx"}:{},{ab:c().length},c().length?{ac:e.f(c(),((r,t,o)=>({a:e.t(r.title),b:t,c:e.o((e=>{r.type}))})))}:{}):{},{ad:e.o((e=>d.value=!1)),ae:e.o((e=>d.value=!1)),af:e.o(b),ag:e.o((r=>e.unref(m).field.value=r)),ah:e.p({show:d.value,mode:"time",closeOnClickOverlay:"true",modelValue:e.unref(m).field.value}),ai:"decorate"==e.unref(a).mode},(e.unref(a).mode,{}),{aj:e.s(e.unref(p))}))}}),l=e._export_sfc(u,[["__scopeId","data-v-b16db64e"]]);tt.createComponent(l);
