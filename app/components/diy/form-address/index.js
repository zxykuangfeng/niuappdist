"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../utils/common.js"),t=require("../../../stores/diy.js"),o=require("../../../../locale/index.js");if(require("../../../../utils/pages.js"),require("../../../../stores/member.js"),require("../../../api/member.js"),require("../../../../utils/request.js"),require("../../../api/auth.js"),require("../../../../stores/config.js"),require("../../../../stores/system.js"),require("../../../api/system.js"),require("../../../../hooks/useLogin.js"),require("../../../../locale/i18n.js"),require("../../../../locale/language.js"),!Array){e.resolveComponent("area-select")()}Math;const a=e.defineComponent({__name:"index",props:["component","index","global"],setup(a,{expose:u}){const n=a,i=t.useDiyStore(),d=e.ref(),l=e.ref(null),f=e.ref(!1),s=e.computed((()=>"decorate"==i.mode?i.value[n.index]:n.component)),c=e.computed((()=>n.global)),m=e.ref({id:0,name:"",mobile:"",province_id:0,city_id:0,district_id:0,lat:"",lng:"",address:"",address_name:"",full_address:"",is_default:0,area:""}),v=e.computed((()=>{let e="请选择";return"province/city/district/address"==s.value.addressFormat?e+="省/市/区/街道":"province/city/district/street"==s.value.addressFormat?e+="省/市/区/街道(镇)":"province/city/district"==s.value.addressFormat?e+="省/市/区(县)":"province/city"==s.value.addressFormat?e+="省/市":e+="省份",e})),p=e.computed((()=>{var e="";return e+="position:relative;",s.value.componentStartBgColor&&(s.value.componentStartBgColor&&s.value.componentEndBgColor?e+=`background:linear-gradient(${s.value.componentGradientAngle},${s.value.componentStartBgColor},${s.value.componentEndBgColor});`:e+="background-color:"+s.value.componentStartBgColor+";"),s.value.componentBgUrl&&(e+=`background-image:url('${r.img(s.value.componentBgUrl)}');`,e+="background-size: cover;background-repeat: no-repeat;"),s.value.topRounded&&(e+="border-top-left-radius:"+2*s.value.topRounded+"rpx;"),s.value.topRounded&&(e+="border-top-right-radius:"+2*s.value.topRounded+"rpx;"),s.value.bottomRounded&&(e+="border-bottom-left-radius:"+2*s.value.bottomRounded+"rpx;"),s.value.bottomRounded&&(e+="border-bottom-right-radius:"+2*s.value.bottomRounded+"rpx;"),e})),g=e=>{!f.value||m.value.province_id!=e.province.id&&m.value.city_id==e.city.id&&m.value.district_id==e.district.id||(m.value.lat="",m.value.lng=""),m.value.province_id=e.province.id||0,m.value.city_id=e.city.id||0,m.value.district_id=e.district.id||0,m.value.area=`${e.province.name||""}${e.city.name||""}${e.district.name||""}`,s.value.field.value=m.value.area,f.value=!1};e.onMounted((()=>{y(),"decorate"==i.mode&&e.watch((()=>s.value),((e,r)=>{e&&e.componentName}))}));const y=()=>{},x=()=>{f.value=!0,d.value.open()},b=()=>{let e=[];if(s.value.autofill){let r={title:"已自动填充"};e.push(r)}if(s.value.field.privacyProtection){let r={title:"已开启隐私保护",type:"privacy"};e.push(r)}return e.forEach(((e,r,t)=>{if(r!=t.length-1){let e={title:"|"};t.push(e)}})),e},q=()=>{s.value.field.value=""},h=e.computed((()=>"decorate"==i.mode));return u({verify:()=>{const e={code:!0,message:""};return s.value.field.required&&""==s.value.field.value&&"decorate"!=i.mode&&(e.code=!1,e.message="111"),l.value=e,e},reset:q}),(r,t)=>e.e({a:e.unref(s).viewFormDetail},e.unref(s).viewFormDetail?e.e({b:"style-1"==e.unref(c).completeLayout},"style-1"==e.unref(c).completeLayout?{c:e.t(e.unref(s).field.name),d:e.t(e.unref(s).field.value)}:{},{e:"style-2"==e.unref(c).completeLayout},"style-2"==e.unref(c).completeLayout?{f:e.t(e.unref(s).field.name),g:e.t(e.unref(s).field.value)}:{}):e.e({h:"style-1"==e.unref(c).completeLayout},"style-1"==e.unref(c).completeLayout?e.e({i:e.t(e.unref(s).field.name),j:e.unref(s).textColor,k:2*e.unref(s).fontSize+"rpx",l:e.unref(s).fontWeight,m:e.t(e.unref(s).field.required?"*":""),n:"decorate"==e.unref(i).mode&&e.unref(s).isHidden},"decorate"==e.unref(i).mode&&e.unref(s).isHidden?{o:e.t(e.unref(o.t)("diyForm.hidden"))}:{},{p:e.unref(s).field.remark.text},e.unref(s).field.remark.text?{q:e.t(e.unref(s).field.remark.text),r:e.unref(s).field.remark.color,s:2*e.unref(s).field.remark.fontSize+"rpx"}:{},{t:l.value&&!l.value.code},l.value&&!l.value.code?{v:e.t(l.value.message)}:{},{w:e.unref(v),x:{"font-size":2*e.unref(s).fontSize+"rpx"},y:e.unref(s).textColor,z:2*e.unref(s).fontSize+"rpx",A:e.unref(h),B:e.o(x),C:e.unref(s).field.value,D:e.o((r=>e.unref(s).field.value=r.detail.value)),E:e.unref(s).field.value},e.unref(s).field.value?{F:e.o(q)}:{},{G:"province/city/district/address"==e.unref(s).addressFormat},"province/city/district/address"==e.unref(s).addressFormat?{H:{"font-size":2*e.unref(s).fontSize+"rpx"},I:e.unref(h)}:{},{J:b().length},b().length?{K:e.f(b(),((t,o,a)=>({a:e.t(t.title),b:o,c:e.o((e=>r.eventFn(t.type)))})))}:{}):{},{L:"style-2"==e.unref(c).completeLayout},"style-2"==e.unref(c).completeLayout?e.e({M:"decorate"==e.unref(i).mode&&e.unref(s).isHidden},"decorate"==e.unref(i).mode&&e.unref(s).isHidden?{N:e.t(e.unref(o.t)("diyForm.hidden"))}:{},{O:e.unref(s).field.required},e.unref(s).field.required?{P:e.t(e.unref(s).field.required?"*":"")}:{},{Q:e.t(e.unref(s).field.name),R:e.unref(s).textColor,S:2*e.unref(s).fontSize+"rpx",T:e.unref(s).fontWeight,U:"left"==e.unref(c).completeAlign?1:"",V:"right"==e.unref(c).completeAlign?1:"",W:e.unref(v),X:e.o(x),Y:{"font-size":2*e.unref(s).fontSize+"rpx"},Z:e.unref(s).textColor,aa:2*e.unref(s).fontSize+"rpx",ab:e.unref(h),ac:e.unref(s).field.value,ad:e.o((r=>e.unref(s).field.value=r.detail.value)),ae:e.unref(c).borderControl?"":1,af:"province/city/district/address"==e.unref(s).addressFormat},"province/city/district/address"==e.unref(s).addressFormat?{ag:{"font-size":2*e.unref(s).fontSize+"rpx"},ah:e.unref(h)}:{},{ai:l.value&&!l.value.code},l.value&&!l.value.code?{aj:e.t(l.value.message)}:{},{ak:e.unref(s).field.remark.text},e.unref(s).field.remark.text?{al:e.t(e.unref(s).field.remark.text),am:e.unref(s).field.remark.color,an:2*e.unref(s).field.remark.fontSize+"rpx"}:{},{ao:b().length},b().length?{ap:e.f(b(),((t,o,a)=>({a:e.t(t.title),b:o,c:e.o((e=>r.eventFn(t.type)))})))}:{}):{},{aq:"decorate"==e.unref(i).mode},(e.unref(i).mode,{}),{ar:e.s(e.unref(p))}),{as:e.sr(d,"7ae9807f-0",{k:"areaRef"}),at:e.o(g),av:e.p({"area-id":m.value.district_id})})}}),u=e._export_sfc(a,[["__scopeId","data-v-7ae9807f"]]);tt.createComponent(u);
