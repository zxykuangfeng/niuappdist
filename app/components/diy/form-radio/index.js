"use strict";const e=require("../../../../common/vendor.js"),o=require("../../../../utils/common.js"),t=require("../../../../locale/index.js"),r=require("../../../stores/diy.js");if(require("../../../../utils/pages.js"),require("../../../../stores/member.js"),require("../../../api/member.js"),require("../../../../utils/request.js"),require("../../../api/auth.js"),require("../../../../stores/config.js"),require("../../../../stores/system.js"),require("../../../api/system.js"),require("../../../../locale/i18n.js"),require("../../../../locale/language.js"),require("../../../../hooks/useLogin.js"),!Array){(e.resolveComponent("u-radio")+e.resolveComponent("u-radio-group")+e.resolveComponent("u-popup"))()}Math||((()=>"../../../../node-modules/uview-plus/components/u-radio/u-radio.js")+(()=>"../../../../node-modules/uview-plus/components/u-radio-group/u-radio-group.js")+(()=>"../../../../node-modules/uview-plus/components/u-popup/u-popup.js")+l)();const l=()=>"../form-privacy-pop/index.js",a=e.defineComponent({__name:"index",props:["component","index","global"],setup(l,{expose:a}){const u=l,n=r.useDiyStore(),i=e.ref([]),f=e.ref(!1),d=e.ref([]),c=e.ref(""),s=e.ref(null),p=e.ref(null),m=e.computed((()=>"decorate"==n.mode?n.value[u.index]:u.component)),v=e.computed((()=>u.global)),y=e.computed((()=>`${m.value.field.name}已开启隐私保护，提交后会部分打码，只有你自己和管理员才能查看完整信息`)),g=()=>{let e=[];if(m.value.autofill){let o={title:"已自动填充"};e.push(o)}if(m.value.field.privacyProtection){let o={title:"已开启隐私保护",type:"privacy"};e.push(o)}return e.forEach(((e,o,t)=>{if(o!=t.length-1){let e={title:"|"};t.push(e)}})),e},x=e=>{"privacy"==e&&p.value.open()},b=e.computed((()=>{var e="";return e+="position:relative;",m.value.componentStartBgColor&&m.value.componentEndBgColor?e+=`background:linear-gradient(${m.value.componentGradientAngle},${m.value.componentStartBgColor},${m.value.componentEndBgColor});`:m.value.componentStartBgColor?e+="background-color:"+m.value.componentStartBgColor+";":m.value.componentEndBgColor&&(e+="background-color:"+m.value.componentEndBgColor+";"),m.value.componentBgUrl&&(e+=`background-image:url('${o.img(m.value.componentBgUrl)}');`,e+="background-size: cover;background-repeat: no-repeat;"),m.value.topRounded&&(e+="border-top-left-radius:"+2*m.value.topRounded+"rpx;"),m.value.topRounded&&(e+="border-top-right-radius:"+2*m.value.topRounded+"rpx;"),m.value.bottomRounded&&(e+="border-bottom-left-radius:"+2*m.value.bottomRounded+"rpx;"),m.value.bottomRounded&&(e+="border-bottom-right-radius:"+2*m.value.bottomRounded+"rpx;"),e}));e.onMounted((()=>{C(),"decorate"==n.mode&&e.watch((()=>m.value),((e,o)=>{e&&e.componentName})),"style-3"==m.value.style&&m.value.field.value.length>0&&(d.value=m.value.field.value[0].id),m.value.field.value.length>0&&(c.value=m.value.field.value[0].id)}));const C=()=>{},h=e.computed((()=>{let e="";return e+=`请选择${m.value.field.name}`,e})),S=e.computed((()=>{let e=[];return m.value.field.value.forEach((o=>{const t=m.value.options.find((e=>e.id===o.id));t&&e.push(t.text)})),e.join(", ")})),z=e.computed((()=>"decorate"===n.mode)),j=()=>{z.value||(f.value=!0)},q=e=>{c.value=e;const o=m.value.options.find((o=>o.id===e));m.value.field.value=[{id:o.id,text:o.text}],f.value=!1},k=e=>{z.value||(c.value=e.id,m.value.field.value=[{id:e.id,text:e.text}])};return a({verify:()=>{const e={code:!0,message:""};return m.value.field.required&&""==m.value.field.value.length&&"decorate"!=n.mode&&(e.code=!1,e.message=h.value),s.value=e,e},reset:()=>{c.value="",d.value=[],i.value=[],m.value.field.value=[]}}),(o,r)=>e.e({a:e.unref(m).viewFormDetail},e.unref(m).viewFormDetail?e.e({b:"style-1"==e.unref(v).completeLayout},"style-1"==e.unref(v).completeLayout?{c:e.t(e.unref(m).field.name),d:e.f(e.unref(m).field.value,((o,t,r)=>({a:e.t(o.text),b:t})))}:{},{e:"style-2"==e.unref(v).completeLayout},"style-2"==e.unref(v).completeLayout?{f:e.t(e.unref(m).field.name),g:e.f(e.unref(m).field.value,((o,t,r)=>({a:e.t(o.text),b:t})))}:{}):e.e({h:"style-1"==e.unref(v).completeLayout},"style-1"==e.unref(v).completeLayout?e.e({i:e.t(e.unref(m).field.name),j:e.unref(m).textColor,k:2*e.unref(m).fontSize+"rpx",l:e.unref(m).fontWeight,m:e.t(e.unref(m).field.required?"*":""),n:"decorate"==e.unref(n).mode&&e.unref(m).isHidden},"decorate"==e.unref(n).mode&&e.unref(m).isHidden?{o:e.t(e.unref(t.t)("diyForm.hidden"))}:{},{p:e.unref(m).field.remark.text},e.unref(m).field.remark.text?{q:e.t(e.unref(m).field.remark.text),r:e.unref(m).field.remark.color,s:2*e.unref(m).field.remark.fontSize+"rpx"}:{},{t:s.value&&!s.value.code},s.value&&!s.value.code?{v:e.t(s.value.message)}:{},{w:"style-1"==e.unref(m).style},"style-1"==e.unref(m).style?{x:e.f(e.unref(m).options,((o,t,r)=>({a:"cac55a50-1-"+r+",cac55a50-0",b:e.p({activeColor:"var(--primary-color)",labelSize:2*e.unref(m).fontSize+"rpx",labelColor:e.unref(m).textColor,label:o.text,name:o.id}),c:t}))),y:e.o(q),z:e.o((e=>c.value=e)),A:e.p({iconPlacement:"left",modelValue:c.value})}:{},{B:"style-2"==e.unref(m).style},"style-2"==e.unref(m).style?{C:e.f(e.unref(m).options,((o,t,r)=>({a:"cac55a50-3-"+r+",cac55a50-2",b:e.p({activeColor:"var(--primary-color)",labelSize:2*e.unref(m).fontSize+"rpx",labelColor:e.unref(m).textColor,label:o.text,name:o.id}),c:t,d:e.o((e=>k(o))),e:e.unref(m).options.length-1==t?1:""}))),D:e.o(q),E:e.o((e=>c.value=e)),F:e.p({iconPlacement:"left",placement:"column",modelValue:c.value})}:{},{G:"style-3"==e.unref(m).style},"style-3"==e.unref(m).style?e.e({H:e.unref(m).field.value.length>0},e.unref(m).field.value.length>0?{I:e.t(e.unref(S)),J:e.unref(m).textColor,K:2*e.unref(m).fontSize+"rpx"}:{L:e.t(e.unref(h)),M:2*e.unref(m).fontSize+"rpx"},{N:f.value?1:"",O:2*e.unref(m).fontSize+2+"rpx !important",P:e.o(j)}):{},{Q:g().length},g().length?{R:e.f(g(),((o,t,r)=>({a:e.t(o.title),b:t,c:e.o((e=>x(o.type)))})))}:{}):{},{S:"style-2"==e.unref(v).completeLayout},"style-2"==e.unref(v).completeLayout?e.e({T:"decorate"==e.unref(n).mode&&e.unref(m).isHidden},"decorate"==e.unref(n).mode&&e.unref(m).isHidden?{U:e.t(e.unref(t.t)("diyForm.hidden"))}:{},{V:e.t(e.unref(m).field.required?"*":""),W:e.t(e.unref(m).field.name),X:e.unref(m).textColor,Y:2*e.unref(m).fontSize+"rpx",Z:e.unref(m).fontWeight,aa:"left"==e.unref(v).completeAlign?1:"",ab:"right"==e.unref(v).completeAlign?1:"",ac:"style-1"==e.unref(m).style},"style-1"==e.unref(m).style?{ad:e.f(e.unref(m).options,((o,t,r)=>({a:"cac55a50-5-"+r+",cac55a50-4",b:e.p({activeColor:"var(--primary-color)",labelSize:2*e.unref(m).fontSize+"rpx",labelColor:e.unref(m).textColor,label:o.text,name:o.id}),c:t}))),ae:e.o(q),af:e.o((e=>c.value=e)),ag:e.p({iconPlacement:"left",modelValue:c.value})}:{},{ah:"style-2"==e.unref(m).style},"style-2"==e.unref(m).style?{ai:e.f(e.unref(m).options,((o,t,r)=>({a:"cac55a50-7-"+r+",cac55a50-6",b:e.p({activeColor:"var(--primary-color)",labelSize:2*e.unref(m).fontSize+"rpx",labelColor:e.unref(m).textColor,label:o.text,name:o.id}),c:t,d:e.o((e=>k(o))),e:e.unref(m).options.length==t+1?1:""}))),aj:e.o(q),ak:e.o((e=>c.value=e)),al:e.p({placement:"column",iconPlacement:"left",modelValue:c.value})}:{},{am:"style-3"==e.unref(m).style},"style-3"==e.unref(m).style?e.e({an:e.unref(m).field.value.length>0},e.unref(m).field.value.length>0?{ao:e.t(e.unref(S)),ap:e.unref(m).textColor,aq:2*e.unref(m).fontSize+"rpx"}:{ar:e.t(e.unref(h)),as:2*e.unref(m).fontSize+"rpx"},{at:f.value?1:"",av:2*e.unref(m).fontSize+2+"rpx !important",aw:e.o(j)}):{},{ax:"style-2"!=e.unref(m).style&&"style-3"!=e.unref(m).style||!e.unref(v).borderControl?"":1,ay:e.unref(v).borderControl?"":1,az:s.value&&!s.value.code},s.value&&!s.value.code?{aA:e.t(s.value.message)}:{},{aB:e.unref(m).field.remark.text},e.unref(m).field.remark.text?{aC:e.t(e.unref(m).field.remark.text),aD:e.unref(m).field.remark.color,aE:2*e.unref(m).field.remark.fontSize+"rpx"}:{},{aF:g().length},g().length?{aG:e.f(g(),((o,t,r)=>({a:e.t(o.title),b:t,c:e.o((e=>x(o.type)))})))}:{}):{},{aH:e.f(e.unref(m).options,((o,t,r)=>({a:"cac55a50-10-"+r+",cac55a50-9",b:e.p({activeColor:"var(--primary-color)",labelSize:2*e.unref(m).fontSize+"rpx",labelColor:e.unref(m).textColor,label:o.text,name:o.id}),c:e.o((e=>(e=>{f.value=!1,d.value=e.id,m.value.field.value=[{id:e.id,text:e.text}]})(o))),d:t}))),aI:e.o(q),aJ:e.o((e=>d.value=e)),aK:e.p({placement:"column",iconPlacement:"right",modelValue:d.value}),aL:e.o((e=>f.value=!1)),aM:e.p({show:f.value,mode:"bottom"}),aN:"decorate"==e.unref(n).mode},(e.unref(n).mode,{}),{aO:e.sr(p,"cac55a50-11",{k:"formPrivacyRef"}),aP:e.p({data:e.unref(y)}),aQ:e.s(e.unref(b))}))}}),u=e._export_sfc(a,[["__scopeId","data-v-cac55a50"]]);tt.createComponent(u);
