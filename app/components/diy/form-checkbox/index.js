"use strict";const e=require("../../../../common/vendor.js"),l=require("../../../../utils/common.js"),t=require("../../../../locale/index.js"),r=require("../../../stores/diy.js");if(require("../../../../utils/pages.js"),require("../../../../stores/member.js"),require("../../../api/member.js"),require("../../../../utils/request.js"),require("../../../api/auth.js"),require("../../../../stores/config.js"),require("../../../../stores/system.js"),require("../../../api/system.js"),require("../../../../locale/i18n.js"),require("../../../../locale/language.js"),require("../../../../hooks/useLogin.js"),!Array){(e.resolveComponent("u-checkbox")+e.resolveComponent("u-checkbox-group")+e.resolveComponent("u-popup"))()}Math||((()=>"../../../../node-modules/uview-plus/components/u-checkbox/u-checkbox.js")+(()=>"../../../../node-modules/uview-plus/components/u-checkbox-group/u-checkbox-group.js")+(()=>"../../../../node-modules/uview-plus/components/u-popup/u-popup.js")+o)();const o=()=>"../form-privacy-pop/index.js",u=e.defineComponent({__name:"index",props:["component","index","global"],setup(o,{expose:u}){const a=o,n=r.useDiyStore(),f=e.ref([]),i=e.ref(!1),d=e.ref([]),s=e.ref(null),p=e.ref(null),v=e.computed((()=>"decorate"==n.mode?n.value[a.index]:a.component)),c=e.computed((()=>a.global)),m=e.computed((()=>`${v.value.field.name}已开启隐私保护，提交后会部分打码，只有你自己和管理员才能查看完整信息`)),y=()=>{let e=[];if(v.value.autofill){let l={title:"已自动填充"};e.push(l)}if(v.value.field.privacyProtection){let l={title:"已开启隐私保护",type:"privacy"};e.push(l)}return e.forEach(((e,l,t)=>{if(l!=t.length-1){let e={title:"|"};t.push(e)}})),e},g=e=>{"privacy"==e&&p.value.open()},x=e.computed((()=>{var e="";return e+="position:relative;",v.value.componentStartBgColor&&v.value.componentEndBgColor?e+=`background:linear-gradient(${v.value.componentGradientAngle},${v.value.componentStartBgColor},${v.value.componentEndBgColor});`:v.value.componentStartBgColor?e+="background-color:"+v.value.componentStartBgColor+";":v.value.componentEndBgColor&&(e+="background-color:"+v.value.componentEndBgColor+";"),v.value.componentBgUrl&&(e+=`background-image:url('${l.img(v.value.componentBgUrl)}');`,e+="background-size: cover;background-repeat: no-repeat;"),v.value.topRounded&&(e+="border-top-left-radius:"+2*v.value.topRounded+"rpx;"),v.value.topRounded&&(e+="border-top-right-radius:"+2*v.value.topRounded+"rpx;"),v.value.bottomRounded&&(e+="border-bottom-left-radius:"+2*v.value.bottomRounded+"rpx;"),v.value.bottomRounded&&(e+="border-bottom-right-radius:"+2*v.value.bottomRounded+"rpx;"),e}));e.onMounted((()=>{b(),"decorate"==n.mode&&e.watch((()=>v.value),((e,l)=>{e&&e.componentName})),"style-3"==v.value.style&&(d.value=v.value.field.value.map((e=>e.id))),v.value.field.value.length>0&&(f.value=v.value.field.value.map((e=>e.id)))}));const b=()=>{},h=e.computed((()=>{let e="";return e+=`请选择${v.value.field.name}`,e})),C=e.ref([]),k=()=>{i.value=!1,d.value=C.value.map((e=>e.id))},S=()=>{i.value=!1;const e=v.value.options.filter((e=>d.value.includes(e.id)));v.value.field.value=e.map((e=>({id:e.id,text:e.text})))},q=e.computed((()=>"decorate"===n.mode)),z=()=>{q.value||(C.value=[...v.value.field.value],i.value=!0)},j=e=>{const l=v.value.options.filter((l=>e.includes(l.id)));v.value.field.value=l.map((e=>({id:e.id,text:e.text})))},B=e=>{if(q.value)return;const l=e.id,t=f.value.indexOf(l);t>-1?f.value.splice(t,1):f.value.push(l);const r=v.value.options.filter((e=>f.value.includes(e.id)));v.value.field.value=r.map((e=>({id:e.id,text:e.text})))};return u({verify:()=>{const e={code:!0,message:""};return v.value.field.required&&""==v.value.field.value.length&&"decorate"!=n.mode&&(e.code=!1,e.message=h.value),s.value=e,e},reset:()=>{d.value=[],f.value=[],v.value.field.value=[]}}),(l,r)=>e.e({a:e.unref(v).viewFormDetail},e.unref(v).viewFormDetail?e.e({b:"style-1"==e.unref(c).completeLayout},"style-1"==e.unref(c).completeLayout?{c:e.t(e.unref(v).field.name),d:e.f(e.unref(v).field.value,((l,t,r)=>e.e({a:e.t(l.text),b:t!==e.unref(v).field.value.length-1},(e.unref(v).field.value.length,{}),{c:t})))}:{},{e:"style-2"==e.unref(c).completeLayout},"style-2"==e.unref(c).completeLayout?{f:e.t(e.unref(v).field.name),g:e.f(e.unref(v).field.value,((l,t,r)=>e.e({a:e.t(l.text),b:t!==e.unref(v).field.value.length-1},(e.unref(v).field.value.length,{}),{c:t})))}:{}):e.e({h:"style-1"==e.unref(c).completeLayout},"style-1"==e.unref(c).completeLayout?e.e({i:e.t(e.unref(v).field.name),j:e.unref(v).textColor,k:2*e.unref(v).fontSize+"rpx",l:e.unref(v).fontWeight,m:e.t(e.unref(v).field.required?"*":""),n:"decorate"==e.unref(n).mode&&e.unref(v).isHidden},"decorate"==e.unref(n).mode&&e.unref(v).isHidden?{o:e.t(e.unref(t.t)("diyForm.hidden"))}:{},{p:e.unref(v).field.remark.text},e.unref(v).field.remark.text?{q:e.t(e.unref(v).field.remark.text),r:e.unref(v).field.remark.color,s:2*e.unref(v).field.remark.fontSize+"rpx"}:{},{t:s.value&&!s.value.code},s.value&&!s.value.code?{v:e.t(s.value.message)}:{},{w:"style-1"==e.unref(v).style},"style-1"==e.unref(v).style?{x:e.f(e.unref(v).options,((l,t,r)=>({a:"3ff66877-1-"+r+",3ff66877-0",b:e.p({activeColor:"var(--primary-color)",labelSize:2*e.unref(v).fontSize+"rpx",labelColor:e.unref(v).textColor,label:l.text,name:l.id}),c:t}))),y:e.o(j),z:e.o((e=>f.value=e)),A:e.p({iconPlacement:"left",modelValue:f.value})}:{},{B:"style-2"==e.unref(v).style},"style-2"==e.unref(v).style?{C:e.f(e.unref(v).options,((l,t,r)=>({a:"3ff66877-3-"+r+",3ff66877-2",b:e.p({activeColor:"var(--primary-color)",labelSize:2*e.unref(v).fontSize+"rpx",labelColor:e.unref(v).textColor,label:l.text,name:l.id}),c:t,d:e.o((e=>B(l))),e:e.unref(v).options.length-1==t?1:""}))),D:e.o(j),E:e.o((e=>f.value=e)),F:e.p({iconPlacement:"left",placement:"column",modelValue:f.value})}:{},{G:"style-3"==e.unref(v).style},"style-3"==e.unref(v).style?e.e({H:e.unref(v).field.value&&e.unref(v).field.value.length},e.unref(v).field.value&&e.unref(v).field.value.length?{I:e.f(e.unref(v).field.value,((l,t,r)=>e.e({a:e.t(l.text),b:t!==e.unref(v).field.value.length-1},(e.unref(v).field.value.length,{})))),J:e.unref(v).textColor,K:2*e.unref(v).fontSize+"rpx"}:{L:e.t(e.unref(h)),M:2*e.unref(v).fontSize+"rpx"},{N:i.value?1:"",O:2*e.unref(v).fontSize+2+"rpx !important",P:e.o(z)}):{},{Q:y().length},y().length?{R:e.f(y(),((l,t,r)=>({a:e.t(l.title),b:t,c:e.o((e=>g(l.type)))})))}:{}):{},{S:"style-2"==e.unref(c).completeLayout},"style-2"==e.unref(c).completeLayout?e.e({T:"decorate"==e.unref(n).mode&&e.unref(v).isHidden},"decorate"==e.unref(n).mode&&e.unref(v).isHidden?{U:e.t(e.unref(t.t)("diyForm.hidden"))}:{},{V:e.unref(v).field.required},e.unref(v).field.required?{W:e.t(e.unref(v).field.required?"*":"")}:{},{X:e.t(e.unref(v).field.name),Y:e.unref(v).textColor,Z:2*e.unref(v).fontSize+"rpx",aa:e.unref(v).fontWeight,ab:"left"==e.unref(c).completeAlign?1:"",ac:"right"==e.unref(c).completeAlign?1:"",ad:"style-1"==e.unref(v).style},"style-1"==e.unref(v).style?{ae:e.f(e.unref(v).options,((l,t,r)=>({a:t,b:"3ff66877-5-"+r+",3ff66877-4",c:e.p({activeColor:"var(--primary-color)",labelSize:2*e.unref(v).fontSize+"rpx",labelColor:e.unref(v).textColor,label:l.text,name:l.id})}))),af:e.o(j),ag:e.o((e=>f.value=e)),ah:e.p({iconPlacement:"left",modelValue:f.value})}:{},{ai:"style-2"==e.unref(v).style},"style-2"==e.unref(v).style?{aj:e.f(e.unref(v).options,((l,t,r)=>({a:"3ff66877-7-"+r+",3ff66877-6",b:e.p({activeColor:"var(--primary-color)",labelSize:2*e.unref(v).fontSize+"rpx",labelColor:e.unref(v).textColor,label:l.text,name:l.id}),c:t,d:e.o((e=>B(l))),e:e.unref(v).options.length==t+1?1:""}))),ak:e.o(j),al:e.o((e=>f.value=e)),am:e.p({placement:"column",iconPlacement:"left",modelValue:f.value})}:{},{an:"style-3"==e.unref(v).style},"style-3"==e.unref(v).style?e.e({ao:e.unref(v).field.value&&e.unref(v).field.value.length},e.unref(v).field.value&&e.unref(v).field.value.length?{ap:e.f(e.unref(v).field.value,((l,t,r)=>e.e({a:e.t(l.text),b:t!==e.unref(v).field.value.length-1},(e.unref(v).field.value.length,{})))),aq:e.unref(v).textColor,ar:2*e.unref(v).fontSize+"rpx"}:{as:e.t(e.unref(h)),at:2*e.unref(v).fontSize+"rpx"},{av:i.value?1:"",aw:2*e.unref(v).fontSize+2+"rpx !important",ax:e.o(z)}):{},{ay:"style-2"!=e.unref(v).style&&"style-3"!=e.unref(v).style||!e.unref(c).borderControl?"":1,az:e.unref(c).borderControl?"":1,aA:s.value&&!s.value.code},s.value&&!s.value.code?{aB:e.t(s.value.message)}:{},{aC:e.unref(v).field.remark.text},e.unref(v).field.remark.text?{aD:e.t(e.unref(v).field.remark.text),aE:e.unref(v).field.remark.color,aF:2*e.unref(v).field.remark.fontSize+"rpx"}:{},{aG:y().length},y().length?{aH:e.f(y(),((l,t,r)=>({a:e.t(l.title),b:t,c:e.o((e=>g(l.type)))})))}:{}):{},{aI:e.f(e.unref(v).options,((l,t,r)=>({a:"3ff66877-10-"+r+",3ff66877-9",b:e.p({activeColor:"var(--primary-color)",labelSize:"30rpx",labelColor:"#333",label:l.text,name:l.id}),c:t}))),aJ:e.o((e=>d.value=e)),aK:e.p({placement:"column",iconPlacement:"right",modelValue:d.value}),aL:e.t(e.unref(t.t)("cancel")),aM:e.o(k),aN:e.t(e.unref(t.t)("confirm")),aO:e.o(S),aP:e.o((e=>i.value=!1)),aQ:e.p({show:i.value,mode:"bottom"}),aR:"decorate"==e.unref(n).mode},(e.unref(n).mode,{}),{aS:e.sr(p,"3ff66877-11",{k:"formPrivacyRef"}),aT:e.p({data:e.unref(m)}),aU:e.s(e.unref(x))}))}}),a=e._export_sfc(u,[["__scopeId","data-v-3ff66877"]]);tt.createComponent(a);
