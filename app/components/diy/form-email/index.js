"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../utils/common.js"),o=require("../../../../locale/index.js"),t=require("../../../stores/diy.js");require("../../../../utils/pages.js"),require("../../../../stores/member.js"),require("../../../api/member.js"),require("../../../../utils/request.js"),require("../../../api/auth.js"),require("../../../../stores/config.js"),require("../../../../stores/system.js"),require("../../../api/system.js"),require("../../../../locale/i18n.js"),require("../../../../locale/language.js"),require("../../../../hooks/useLogin.js"),Math||u();const u=()=>"../form-privacy-pop/index.js",n=e.defineComponent({__name:"index",props:["component","index","global"],setup(u,{expose:n}){const l=u,a=t.useDiyStore(),d=e.ref(null),i=e.ref(null),f=e.computed((()=>"decorate"==a.mode?a.value[l.index]:l.component)),m=e.computed((()=>l.global)),c=e.computed((()=>{let e="";return e+=f.value.placeholder,e})),s=e.computed((()=>`${f.value.field.name}已开启隐私保护，提交后会部分打码，只有你自己和管理员才能查看完整信息`)),p=()=>{let e=[];if(f.value.autofill){let r={title:"已自动填充"};e.push(r)}if(f.value.field.privacyProtection){let r={title:"已开启隐私保护",type:"privacy"};e.push(r)}return e.forEach(((e,r,o)=>{if(r!=o.length-1){let e={title:"|"};o.push(e)}})),e},v=e=>{"privacy"==e&&i.value.open()},g=e.computed((()=>{var e="";return e+="position:relative;",f.value.componentStartBgColor&&f.value.componentEndBgColor?e+=`background:linear-gradient(${f.value.componentGradientAngle},${f.value.componentStartBgColor},${f.value.componentEndBgColor});`:f.value.componentStartBgColor?e+="background-color:"+f.value.componentStartBgColor+";":f.value.componentEndBgColor&&(e+="background-color:"+f.value.componentEndBgColor+";"),f.value.componentBgUrl&&(e+=`background-image:url('${r.img(f.value.componentBgUrl)}');`,e+="background-size: cover;background-repeat: no-repeat;"),f.value.topRounded&&(e+="border-top-left-radius:"+2*f.value.topRounded+"rpx;"),f.value.topRounded&&(e+="border-top-right-radius:"+2*f.value.topRounded+"rpx;"),f.value.bottomRounded&&(e+="border-bottom-left-radius:"+2*f.value.bottomRounded+"rpx;"),f.value.bottomRounded&&(e+="border-bottom-right-radius:"+2*f.value.bottomRounded+"rpx;"),e}));e.onMounted((()=>{y(),"decorate"==a.mode&&e.watch((()=>f.value),((e,r)=>{e&&"FormEmail"==e.componentName&&y()}))}));const y=()=>{("decorate"==a.mode||""==f.value.field.value&&f.value.field.default)&&(f.value.field.value=f.value.field.default)},x=e.computed((()=>"decorate"==a.mode));return n({verify:()=>{const e={code:!0,message:""};return f.value.field.required&&""==f.value.field.value&&"decorate"!=a.mode?(e.code=!1,e.message=`${c.value}`):/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(f.value.field.value)||"decorate"==a.mode||(e.code=!1,e.message="邮箱格式不正确，请重新输入"),d.value=e,e},reset:()=>{f.value.field.value=""}}),(r,t)=>e.e({a:e.unref(f).viewFormDetail},e.unref(f).viewFormDetail?e.e({b:"style-1"==e.unref(m).completeLayout},"style-1"==e.unref(m).completeLayout?{c:e.t(e.unref(f).field.name),d:e.t(e.unref(f).field.value)}:{},{e:"style-2"==e.unref(m).completeLayout},"style-2"==e.unref(m).completeLayout?{f:e.t(e.unref(f).field.name),g:e.t(e.unref(f).field.value)}:{}):e.e({h:"style-1"==e.unref(m).completeLayout},"style-1"==e.unref(m).completeLayout?e.e({i:e.t(e.unref(f).field.name),j:e.unref(f).textColor,k:2*e.unref(f).fontSize+"rpx",l:e.unref(f).fontWeight,m:e.t(e.unref(f).field.required?"*":""),n:"decorate"==e.unref(a).mode&&e.unref(f).isHidden},"decorate"==e.unref(a).mode&&e.unref(f).isHidden?{o:e.t(e.unref(o.t)("diyForm.hidden"))}:{},{p:e.unref(f).field.remark.text},e.unref(f).field.remark.text?{q:e.t(e.unref(f).field.remark.text),r:e.unref(f).field.remark.color,s:2*e.unref(f).field.remark.fontSize+"rpx"}:{},{t:d.value&&!d.value.code},d.value&&!d.value.code?{v:e.t(d.value.message)}:{},{w:e.unref(c),x:{"font-size":2*e.unref(f).fontSize+"rpx"},y:e.unref(f).textColor,z:2*e.unref(f).fontSize+"rpx",A:e.unref(x),B:e.unref(f).field.value,C:e.o((r=>e.unref(f).field.value=r.detail.value)),D:p().length},p().length?{E:e.f(p(),((r,o,t)=>({a:e.t(r.title),b:o,c:e.o((e=>v(r.type)))})))}:{}):{},{F:"style-2"==e.unref(m).completeLayout},"style-2"==e.unref(m).completeLayout?e.e({G:"decorate"==e.unref(a).mode&&e.unref(f).isHidden},"decorate"==e.unref(a).mode&&e.unref(f).isHidden?{H:e.t(e.unref(o.t)("diyForm.hidden"))}:{},{I:e.unref(f).field.required},e.unref(f).field.required?{J:e.t(e.unref(f).field.required?"*":"")}:{},{K:e.t(e.unref(f).field.name),L:e.unref(f).textColor,M:2*e.unref(f).fontSize+"rpx",N:e.unref(f).fontWeight,O:"left"==e.unref(m).completeAlign?1:"",P:"right"==e.unref(m).completeAlign?1:"",Q:e.unref(c),R:{"font-size":2*e.unref(f).fontSize+"rpx"},S:e.unref(f).textColor,T:2*e.unref(f).fontSize+"rpx",U:e.unref(x),V:e.unref(f).field.value,W:e.o((r=>e.unref(f).field.value=r.detail.value)),X:e.unref(m).borderControl?"":1,Y:d.value&&!d.value.code},d.value&&!d.value.code?{Z:e.t(d.value.message)}:{},{aa:e.unref(f).field.remark.text},e.unref(f).field.remark.text?{ab:e.t(e.unref(f).field.remark.text),ac:e.unref(f).field.remark.color,ad:2*e.unref(f).field.remark.fontSize+"rpx"}:{},{ae:p().length},p().length?{af:e.f(p(),((r,o,t)=>({a:e.t(r.title),b:o,c:e.o((e=>v(r.type)))})))}:{}):{},{ag:"decorate"==e.unref(a).mode},(e.unref(a).mode,{}),{ah:e.sr(i,"daee6c6a-0",{k:"formPrivacyRef"}),ai:e.p({data:e.unref(s)}),aj:e.s(e.unref(g))}))}}),l=e._export_sfc(n,[["__scopeId","data-v-daee6c6a"]]);tt.createComponent(l);
