"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../utils/common.js"),o=require("../../../stores/diy.js");if(require("../../../../utils/pages.js"),require("../../../../stores/member.js"),require("../../../api/member.js"),require("../../../../utils/request.js"),require("../../../../locale/index.js"),require("../../../../locale/i18n.js"),require("../../../../locale/language.js"),require("../../../../stores/system.js"),require("../../../api/system.js"),require("../../../../stores/config.js"),require("../../../api/auth.js"),require("../../../../hooks/useLogin.js"),!Array){e.resolveComponent("u-icon")()}Math;const t=e.defineComponent({__name:"index",props:["component","index"],setup(t){const n=t,u=o.useDiyStore(),i=e.computed((()=>"decorate"==u.mode?u.value[n.index]:n.component)),a=e.computed((()=>i.value.list.length>i.value.pageCount*i.value.rowCount)),l=e.computed((()=>{var e="";return e+="position:relative;",i.value.componentStartBgColor&&(i.value.componentStartBgColor&&i.value.componentEndBgColor?e+=`background:linear-gradient(${i.value.componentGradientAngle},${i.value.componentStartBgColor},${i.value.componentEndBgColor});`:e+="background-color:"+i.value.componentStartBgColor+";"),i.value.componentBgUrl&&(e+=`background-image:url('${r.img(i.value.componentBgUrl)}');`,e+="background-size: cover;background-repeat: no-repeat;"),i.value.topRounded&&(e+="border-top-left-radius:"+2*i.value.topRounded+"rpx;"),i.value.topRounded&&(e+="border-top-right-radius:"+2*i.value.topRounded+"rpx;"),i.value.bottomRounded&&(e+="border-bottom-left-radius:"+2*i.value.bottomRounded+"rpx;"),i.value.bottomRounded&&(e+="border-bottom-right-radius:"+2*i.value.bottomRounded+"rpx;"),e})),d=e.computed((()=>{var e="";return i.value.componentBgUrl&&(e+="position:absolute;top:0;width:100%;",e+=`background: rgba(0,0,0,${i.value.componentBgAlpha/10});`,e+=`height:${x.value}px;`,i.value.topRounded&&(e+="border-top-left-radius:"+2*i.value.topRounded+"rpx;"),i.value.topRounded&&(e+="border-top-right-radius:"+2*i.value.topRounded+"rpx;"),i.value.bottomRounded&&(e+="border-bottom-left-radius:"+2*i.value.bottomRounded+"rpx;"),i.value.bottomRounded&&(e+="border-bottom-right-radius:"+2*i.value.bottomRounded+"rpx;")),e})),f=e=>{let r={width:""};return r.width=100/i.value.rowCount+"%",r},g=e.ref(0),m=e=>{g.value=e.detail.current},p=(e,r)=>{let o=i.value.pageCount*i.value.rowCount;return e>=[(r-1)*o]&&e<[r*o]},s="graphic_nav_horizontal_page_slide_swiperheight_"+n.index+"_"+i.value.list.length,c=e.ref(e.index.getStorageSync(s)||"");e.onMounted((()=>{b(),"decorate"==u.mode&&e.watch((()=>i.value),((e,r)=>{e&&"GraphicNav"==e.componentName&&b()}))}));const v=e.getCurrentInstance(),x=e.ref(0),b=()=>{e.nextTick$1((()=>{(()=>{if("horizontal"==i.value.layout&&"pageSlide"==i.value.showStyle){var r=0;e.index.createSelectorQuery().in(v).select(".graphic-nav-item").boundingClientRect((o=>{let t=1;2==i.value.pageCount&&(t=i.value.list.length/i.value.rowCount>1?2:1),r=o.height*t,c.value=r+"px",e.index.setStorageSync(s,c.value)})).exec()}})();e.index.createSelectorQuery().in(v).select(".diy-graphic-nav").boundingClientRect((e=>{e&&(x.value=e.height)})).exec()}))},h=()=>{let e=1;return 2==i.value.pageCount&&(e=i.value.list.length>i.value.rowCount?2:1),e},S=(e,r)=>{let o=e+1;if(2==i.value.pageCount){let e=Math.ceil(i.value.list.length/i.value.rowCount);for(let t=1;t<=e;t++){if(1==r&&t%2!=0&&o>(t-1)*i.value.rowCount&&o<=t*i.value.rowCount)return!0;if(2==r&&t%2==0&&o>(t-1)*i.value.rowCount&&o<=t*i.value.rowCount)return!0}}return!1};return(o,t)=>e.e({a:e.s(e.unref(d)),b:"vertical"==e.unref(i).layout},"vertical"==e.unref(i).layout?{c:e.f(e.unref(i).list,((o,t,n)=>e.e("text"!=e.unref(i).mode?e.e({a:o.imageUrl},o.imageUrl?{b:e.unref(r.img)(o.imageUrl),c:2*e.unref(i).imageSize+"rpx",d:2*e.unref(i).imageSize+"rpx",e:2*e.unref(i).aroundRadius+"rpx"}:{f:e.unref(r.img)("static/resource/images/diy/figure.png"),g:2*e.unref(i).imageSize+"rpx",h:2*e.unref(i).imageSize+"rpx",i:2*e.unref(i).aroundRadius+"rpx"},{j:o.label.control},o.label.control?{k:e.t(o.label.text),l:o.label.textColor,m:"linear-gradient("+o.label.bgColorStart+","+o.label.bgColorEnd+")"}:{},{n:2*e.unref(i).imageSize+"rpx",o:2*e.unref(i).imageSize+"rpx"}):{},"img"!=e.unref(i).mode?{p:e.t(o.title),q:2*e.unref(i).font.size+"rpx",r:e.unref(i).font.weight,s:e.unref(i).font.color}:{},{t:"48c262f8-0-"+n,v:e.o((r=>e.unref(u).toRedirect(o.link))),w:e.n(0==t?"border-t-0":"border-t"),x:o.id}))),d:"text"!=e.unref(i).mode,e:"img"!=e.unref(i).mode,f:e.p({name:"arrow-right",color:"#999999",size:"12"})}:"horizontal"==e.unref(i).layout&&"pageSlide"==e.unref(i).showStyle?e.e({h:e.f(Math.ceil(e.unref(i).list.length/(e.unref(i).pageCount*e.unref(i).rowCount)),((o,t,n)=>({a:e.f(e.unref(i).list,((t,n,a)=>e.e({a:p(n,o)},p(n,o)?e.e({b:"text"!=e.unref(i).mode},"text"!=e.unref(i).mode?e.e({c:t.imageUrl},t.imageUrl?{d:e.unref(r.img)(t.imageUrl),e:2*e.unref(i).imageSize+"rpx",f:2*e.unref(i).imageSize+"rpx",g:2*e.unref(i).aroundRadius+"rpx"}:{h:e.unref(r.img)("static/resource/images/diy/figure.png"),i:2*e.unref(i).imageSize+"rpx",j:2*e.unref(i).imageSize+"rpx",k:2*e.unref(i).aroundRadius+"rpx"},{l:t.label.control},t.label.control?{m:e.t(t.label.text),n:t.label.textColor,o:"linear-gradient("+t.label.bgColorStart+","+t.label.bgColorEnd+")"}:{},{p:2*e.unref(i).imageSize+"rpx",q:2*e.unref(i).imageSize+"rpx"}):{},{r:"img"!=e.unref(i).mode},"img"!=e.unref(i).mode?{s:e.t(t.title),t:"text"!=e.unref(i).mode?1:"",v:2*e.unref(i).font.size+"rpx",w:e.unref(i).font.weight,x:e.unref(i).font.color}:{},{y:e.o((r=>e.unref(u).toRedirect(t.link))),z:e.n(e.unref(i).mode),A:t.id,B:100/e.unref(i).rowCount+"%"}):{})))}))),i:c.value,j:c.value?1:0,k:e.o(m),l:e.unref(a)&&c.value},e.unref(a)&&c.value?{m:e.f(Math.ceil(e.unref(i).list.length/(e.unref(i).pageCount*e.unref(i).rowCount)),((r,o,t)=>({a:e.n(o==g.value?"dot-active":""),b:o==g.value?e.unref(i).swiper.indicatorActiveColor:e.unref(i).swiper.indicatorColor}))),n:e.n(e.unref(i).swiper.indicatorStyle),o:e.n(e.unref(i).swiper.indicatorAlign)}:{}):"horizontal"==e.unref(i).layout&&2==e.unref(i).pageCount&&"singleSlide"==e.unref(i).showStyle?{q:e.f(h(),((o,t,n)=>({a:e.f(e.unref(i).list,((t,n,a)=>e.e({a:S(n,o)},S(n,o)?e.e({b:"text"!=e.unref(i).mode},"text"!=e.unref(i).mode?e.e({c:t.imageUrl},t.imageUrl?{d:e.unref(r.img)(t.imageUrl),e:2*e.unref(i).imageSize+"rpx",f:2*e.unref(i).imageSize+"rpx",g:2*e.unref(i).aroundRadius+"rpx"}:{h:e.unref(r.img)("static/resource/images/diy/figure.png"),i:2*e.unref(i).imageSize+"rpx",j:2*e.unref(i).imageSize+"rpx",k:2*e.unref(i).aroundRadius+"rpx"},{l:t.label.control},t.label.control?{m:e.t(t.label.text),n:t.label.textColor,o:"linear-gradient("+t.label.bgColorStart+","+t.label.bgColorEnd+")"}:{},{p:2*e.unref(i).imageSize+"rpx",q:2*e.unref(i).imageSize+"rpx"}):{},{r:"img"!=e.unref(i).mode},"img"!=e.unref(i).mode?{s:e.t(t.title),t:"text"!=e.unref(i).mode?1:"",v:2*e.unref(i).font.size+"rpx",w:e.unref(i).font.weight,x:e.unref(i).font.color}:{},{y:e.o((r=>e.unref(u).toRedirect(t.link))),z:e.s(f())}):{})))}))),r:"singleSlide"==e.unref(i).showStyle,s:e.n("graphic-nav-"+e.unref(i).showStyle)}:{t:e.f(e.unref(i).list,((o,t,n)=>e.e("text"!=e.unref(i).mode?e.e({a:o.imageUrl},o.imageUrl?{b:e.unref(r.img)(o.imageUrl),c:2*e.unref(i).imageSize+"rpx",d:2*e.unref(i).imageSize+"rpx",e:2*e.unref(i).aroundRadius+"rpx"}:{f:e.unref(r.img)("static/resource/images/diy/figure.png"),g:2*e.unref(i).imageSize+"rpx",h:2*e.unref(i).imageSize+"rpx",i:2*e.unref(i).aroundRadius+"rpx"},{j:o.label.control},o.label.control?{k:e.t(o.label.text),l:o.label.textColor,m:"linear-gradient("+o.label.bgColorStart+","+o.label.bgColorEnd+")"}:{},{n:2*e.unref(i).imageSize+"rpx",o:2*e.unref(i).imageSize+"rpx"}):{},"img"!=e.unref(i).mode?{p:e.t(o.title),q:"text"!=e.unref(i).mode?1:"",r:2*e.unref(i).font.size+"rpx",s:e.unref(i).font.weight,t:e.unref(i).font.color}:{},{v:e.o((r=>e.unref(u).toRedirect(o.link))),w:o.id}))),v:"text"!=e.unref(i).mode,w:"img"!=e.unref(i).mode,x:"singleSlide"==e.unref(i).showStyle?1:"",y:100/e.unref(i).rowCount+"%",z:"singleSlide"==e.unref(i).showStyle,A:e.n("graphic-nav-"+e.unref(i).showStyle)},{g:"horizontal"==e.unref(i).layout&&"pageSlide"==e.unref(i).showStyle,p:"horizontal"==e.unref(i).layout&&2==e.unref(i).pageCount&&"singleSlide"==e.unref(i).showStyle,B:e.s(e.unref(l))})}}),n=e._export_sfc(t,[["__scopeId","data-v-48c262f8"]]);tt.createComponent(n);
