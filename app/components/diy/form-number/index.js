"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../utils/common.js"),t=require("../../../../locale/index.js"),o=require("../../../stores/diy.js");require("../../../../utils/pages.js"),require("../../../../stores/member.js"),require("../../../api/member.js"),require("../../../../utils/request.js"),require("../../../api/auth.js"),require("../../../../stores/config.js"),require("../../../../stores/system.js"),require("../../../api/system.js"),require("../../../../locale/i18n.js"),require("../../../../locale/language.js"),require("../../../../hooks/useLogin.js"),Math||u();const u=()=>"../form-privacy-pop/index.js",n=e.defineComponent({__name:"index",props:["component","index","global"],setup(u,{expose:n}){const l=u,a=o.useDiyStore(),d=e.ref(null),i=e.ref(null),f=e.computed((()=>"decorate"==a.mode?a.value[l.index]:l.component)),m=e.computed((()=>l.global)),c=e.computed((()=>{let e="";return e+=f.value.placeholder,e})),s=e.computed((()=>`${f.value.field.name}已开启隐私保护，提交后会部分打码，只有你自己和管理员才能查看完整信息`)),p=()=>{let e=[];if(f.value.autofill){let r={title:"已自动填充"};e.push(r)}if(f.value.field.privacyProtection){let r={title:"已开启隐私保护",type:"privacy"};e.push(r)}return e.forEach(((e,r,t)=>{if(r!=t.length-1){let e={title:"|"};t.push(e)}})),e},v=e=>{"privacy"==e&&i.value.open()},g=e.computed((()=>{var e="";return e+="position:relative;",f.value.componentStartBgColor&&f.value.componentEndBgColor?e+=`background:linear-gradient(${f.value.componentGradientAngle},${f.value.componentStartBgColor},${f.value.componentEndBgColor});`:f.value.componentStartBgColor?e+="background-color:"+f.value.componentStartBgColor+";":f.value.componentEndBgColor&&(e+="background-color:"+f.value.componentEndBgColor+";"),f.value.componentBgUrl&&(e+=`background-image:url('${r.img(f.value.componentBgUrl)}');`,e+="background-size: cover;background-repeat: no-repeat;"),f.value.topRounded&&(e+="border-top-left-radius:"+2*f.value.topRounded+"rpx;"),f.value.topRounded&&(e+="border-top-right-radius:"+2*f.value.topRounded+"rpx;"),f.value.bottomRounded&&(e+="border-bottom-left-radius:"+2*f.value.bottomRounded+"rpx;"),f.value.bottomRounded&&(e+="border-bottom-right-radius:"+2*f.value.bottomRounded+"rpx;"),e}));e.onMounted((()=>{y(),"decorate"==a.mode&&e.watch((()=>f.value),((e,r)=>{e&&"FormNumber"==e.componentName&&y()}))}));const y=()=>{("decorate"==a.mode||""==f.value.field.value&&f.value.field.default)&&(f.value.field.value=f.value.field.default)},x=e.computed((()=>"decorate"==a.mode));return n({verify:()=>{const e={code:!0,message:""};return f.value.field.required&&""==f.value.field.value&&"decorate"!=a.mode&&(e.code=!1,e.message=`${c.value}`),d.value=e,e},reset:()=>{f.value.field.value=""}}),(r,o)=>e.e({a:e.unref(f).viewFormDetail},e.unref(f).viewFormDetail?e.e({b:"style-1"==e.unref(m).completeLayout},"style-1"==e.unref(m).completeLayout?{c:e.t(e.unref(f).field.name),d:e.t(e.unref(f).field.value)}:{},{e:"style-2"==e.unref(m).completeLayout},"style-2"==e.unref(m).completeLayout?{f:e.t(e.unref(f).field.name),g:e.t(e.unref(f).field.value)}:{}):e.e({h:"style-1"==e.unref(m).completeLayout},"style-1"==e.unref(m).completeLayout?e.e({i:e.t(e.unref(f).field.name),j:e.unref(f).textColor,k:2*e.unref(f).fontSize+"rpx",l:e.unref(f).fontWeight,m:e.t(e.unref(f).field.required?"*":""),n:"decorate"==e.unref(a).mode&&e.unref(f).isHidden},"decorate"==e.unref(a).mode&&e.unref(f).isHidden?{o:e.t(e.unref(t.t)("diyForm.hidden"))}:{},{p:e.unref(f).field.remark.text},e.unref(f).field.remark.text?{q:e.t(e.unref(f).field.remark.text),r:e.unref(f).field.remark.color,s:2*e.unref(f).field.remark.fontSize+"rpx"}:{},{t:d.value&&!d.value.code},d.value&&!d.value.code?{v:e.t(d.value.message)}:{},{w:e.unref(c),x:{"font-size":2*e.unref(f).fontSize+"rpx"},y:e.unref(f).textColor,z:2*e.unref(f).fontSize+"rpx",A:e.unref(x),B:e.unref(f).field.value,C:e.o((r=>e.unref(f).field.value=r.detail.value)),D:e.unref(f).unit},e.unref(f).unit?{E:e.t(e.unref(f).unit)}:{},{F:p().length},p().length?{G:e.f(p(),((r,t,o)=>({a:e.t(r.title),b:t,c:e.o((e=>v(r.type)))})))}:{}):{},{H:"style-2"==e.unref(m).completeLayout},"style-2"==e.unref(m).completeLayout?e.e({I:"decorate"==e.unref(a).mode&&e.unref(f).isHidden},"decorate"==e.unref(a).mode&&e.unref(f).isHidden?{J:e.t(e.unref(t.t)("diyForm.hidden"))}:{},{K:e.unref(f).field.required},e.unref(f).field.required?{L:e.t(e.unref(f).field.required?"*":"")}:{},{M:e.t(e.unref(f).field.name),N:e.unref(f).textColor,O:2*e.unref(f).fontSize+"rpx",P:e.unref(f).fontWeight,Q:"left"==e.unref(m).completeAlign?1:"",R:"right"==e.unref(m).completeAlign?1:"",S:e.unref(c),T:{"font-size":2*e.unref(f).fontSize+"rpx"},U:e.unref(f).textColor,V:2*e.unref(f).fontSize+"rpx",W:e.unref(x),X:e.unref(f).field.value,Y:e.o((r=>e.unref(f).field.value=r.detail.value)),Z:e.unref(f).unit},e.unref(f).unit?{aa:e.t(e.unref(f).unit)}:{},{ab:e.unref(m).borderControl?"":1,ac:d.value&&!d.value.code},d.value&&!d.value.code?{ad:e.t(d.value.message)}:{},{ae:e.unref(f).field.remark.text},e.unref(f).field.remark.text?{af:e.t(e.unref(f).field.remark.text),ag:e.unref(f).field.remark.color,ah:2*e.unref(f).field.remark.fontSize+"rpx"}:{},{ai:p().length},p().length?{aj:e.f(p(),((r,t,o)=>({a:e.t(r.title),b:t,c:e.o((e=>v(r.type)))})))}:{}):{},{ak:"decorate"==e.unref(a).mode},(e.unref(a).mode,{}),{al:e.sr(i,"24d4d724-0",{k:"formPrivacyRef"}),am:e.p({data:e.unref(s)}),an:e.s(e.unref(g))}))}}),l=e._export_sfc(n,[["__scopeId","data-v-24d4d724"]]);tt.createComponent(l);
