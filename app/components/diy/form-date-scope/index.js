"use strict";const e=require("../../../../common/vendor.js"),t=require("../../../../utils/common.js"),a=require("../../../../locale/index.js"),r=require("../../../stores/diy.js");if(require("../../../../utils/pages.js"),require("../../../../stores/member.js"),require("../../../api/member.js"),require("../../../../utils/request.js"),require("../../../api/auth.js"),require("../../../../stores/config.js"),require("../../../../stores/system.js"),require("../../../api/system.js"),require("../../../../locale/i18n.js"),require("../../../../locale/language.js"),require("../../../../hooks/useLogin.js"),!Array){e.resolveComponent("u-calendar")()}Math;const l=e.defineComponent({__name:"index",props:["component","index","global"],setup(l,{expose:u}){const n=l,d=r.useDiyStore(),o=e.ref(!1),f=e.ref(null),i=e.computed((()=>"decorate"==d.mode?d.value[n.index]:n.component)),m=e.computed((()=>n.global)),s=()=>{let e=[];if(i.value.autofill){let t={title:"已自动填充"};e.push(t)}return e.forEach(((e,t,a)=>{if(t!=a.length-1){let e={title:"|"};a.push(e)}})),e},v=e.computed((()=>{let e="",a="";if(i.value.field.value.start.date){let t=i.value.field.value.start.timestamp;e=C(t),a=e}else if(i.value.start.defaultControl){if("current"==i.value.start.dateWay)e=C();else if("diy"==i.value.start.dateWay){let t=i.value.field.default.start.timestamp?i.value.field.default.start.timestamp:"";e=C(t)}a=e}else e=i.value.start.placeholder,a="";return i.value.field.value.start.date=a,i.value.field.value.start.timestamp=a?t.timeTurnTimeStamp(a):0,e})),p=e.computed((()=>{let e="",a="";if(i.value.field.value.end.date){let r=i.value.field.value.end.timestamp;e=C(r),a=e,i.value.field.value.end.date=a,i.value.field.value.end.timestamp=t.timeTurnTimeStamp(a)}else i.value.end.defaultControl?("current"==i.value.end.dateWay?e=C():"diy"==i.value.end.dateWay&&(e=C(i.value.field.default.end.timestamp)),a=e,i.value.field.value.end.date=a,i.value.field.value.end.timestamp=t.timeTurnTimeStamp(a)):e=i.value.end.placeholder;return e})),c=e.computed((()=>{let e=[];return e[0]=C(t.timeTurnTimeStamp(v.value),"YYYY-MM-DD"),e[1]=C(t.timeTurnTimeStamp(p.value),"YYYY-MM-DD"),e})),g=e.computed((()=>{var e="";return e+="position:relative;",i.value.componentStartBgColor&&i.value.componentEndBgColor?e+=`background:linear-gradient(${i.value.componentGradientAngle},${i.value.componentStartBgColor},${i.value.componentEndBgColor});`:i.value.componentStartBgColor?e+="background-color:"+i.value.componentStartBgColor+";":i.value.componentEndBgColor&&(e+="background-color:"+i.value.componentEndBgColor+";"),i.value.componentBgUrl&&(e+=`background-image:url('${t.img(i.value.componentBgUrl)}');`,e+="background-size: cover;background-repeat: no-repeat;"),i.value.topRounded&&(e+="border-top-left-radius:"+2*i.value.topRounded+"rpx;"),i.value.topRounded&&(e+="border-top-right-radius:"+2*i.value.topRounded+"rpx;"),i.value.bottomRounded&&(e+="border-bottom-left-radius:"+2*i.value.bottomRounded+"rpx;"),i.value.bottomRounded&&(e+="border-bottom-right-radius:"+2*i.value.bottomRounded+"rpx;"),e}));e.onMounted((()=>{x(),"decorate"==d.mode&&e.watch((()=>i.value),((e,t)=>{e&&e.componentName}))}));const x=()=>{},y=()=>{"decorate"!==d.mode&&(o.value=!0)},h=e=>{i.value.field.value.start.date=e[0],i.value.field.value.start.timestamp=t.timeTurnTimeStamp(e[0]),i.value.field.value.end.date=e[e.length-1],i.value.field.value.end.timestamp=t.timeTurnTimeStamp(e[e.length-1]),o.value=!1},C=(e="",t=i.value.dateFormat)=>{let a=e?new Date(1e3*e):new Date,r=a.getFullYear(),l=String(a.getMonth()+1).padStart(2,"0"),u=String(a.getDate()).padStart(2,"0"),n="";return"YYYY年M月D日"==t?n=`${r}年${l}月${u}日`:"YYYY-MM-DD"==t?n=`${r}-${l}-${u}`:"YYYY/MM/DD"==t&&(n=`${r}/${l}/${u}`),n};return u({verify:()=>{const e={code:!0,message:""};return i.value.field.required&&(""!=i.value.field.value.start.date&&i.value.field.value.start.timestamp?""!=i.value.field.value.end.date&&i.value.field.value.end.timestamp||(e.code=!1,e.message=`请选择${i.value.end.placeholder}`):(e.code=!1,e.message=`请选择${i.value.start.placeholder}`)),f.value=e,e},reset:()=>{i.value.field.value.start.date="",i.value.field.value.start.timestamp=0,i.value.field.value.end.date="",i.value.field.value.end.timestamp=0}}),(t,r)=>e.e({a:e.unref(i).viewFormDetail},e.unref(i).viewFormDetail?e.e({b:"style-1"==e.unref(m).completeLayout},"style-1"==e.unref(m).completeLayout?e.e({c:e.unref(i).field.value.start.date||e.unref(i).field.value.end.date},e.unref(i).field.value.start.date||e.unref(i).field.value.end.date?e.e({d:e.t(e.unref(i).field.name),e:e.t(e.unref(i).field.value.start.date),f:e.unref(i).field.value.start.date&&e.unref(i).field.value.end.date},(e.unref(i).field.value.start.date&&e.unref(i).field.value.end.date,{}),{g:e.t(e.unref(i).field.value.end.date)}):{}):{},{h:"style-2"==e.unref(m).completeLayout},"style-2"==e.unref(m).completeLayout?e.e({i:e.unref(i).field.value.start.date||e.unref(i).field.value.end.date},e.unref(i).field.value.start.date||e.unref(i).field.value.end.date?e.e({j:e.t(e.unref(i).field.name),k:e.t(e.unref(i).field.value.start.date),l:e.unref(i).field.value.start.date&&e.unref(i).field.value.end.date},(e.unref(i).field.value.start.date&&e.unref(i).field.value.end.date,{}),{m:e.t(e.unref(i).field.value.end.date)}):{}):{}):e.e({n:"style-1"==e.unref(m).completeLayout},"style-1"==e.unref(m).completeLayout?e.e({o:e.t(e.unref(i).field.name),p:e.unref(i).textColor,q:2*e.unref(i).fontSize+"rpx",r:e.unref(i).fontWeight,s:e.t(e.unref(i).field.required?"*":""),t:"decorate"==e.unref(d).mode&&e.unref(i).isHidden},"decorate"==e.unref(d).mode&&e.unref(i).isHidden?{v:e.t(e.unref(a.t)("diyForm.hidden"))}:{},{w:e.unref(i).field.remark.text},e.unref(i).field.remark.text?{x:e.t(e.unref(i).field.remark.text),y:e.unref(i).field.remark.color,z:2*e.unref(i).field.remark.fontSize+"rpx"}:{},{A:f.value&&!f.value.code},f.value&&!f.value.code?{B:e.t(f.value.message)}:{},{C:e.t(e.unref(v)),D:e.unref(i).field.value.start.timestamp||e.unref(i).defaultControl?"":1,E:e.unref(i).textColor,F:2*e.unref(i).fontSize+"rpx",G:e.o(y),H:e.unref(i).textColor,I:2*e.unref(i).fontSize+"rpx",J:e.t(e.unref(p)),K:e.unref(i).field.value.end.timestamp||e.unref(i).defaultControl?"":1,L:e.unref(i).textColor,M:2*e.unref(i).fontSize+"rpx",N:e.o(y),O:s().length},s().length?{P:e.f(s(),((t,a,r)=>({a:e.t(t.title),b:a,c:e.o((e=>{t.type}))})))}:{}):{},{Q:"style-2"==e.unref(m).completeLayout},"style-2"==e.unref(m).completeLayout?e.e({R:"decorate"==e.unref(d).mode&&e.unref(i).isHidden},"decorate"==e.unref(d).mode&&e.unref(i).isHidden?{S:e.t(e.unref(a.t)("diyForm.hidden"))}:{},{T:e.unref(i).field.required},e.unref(i).field.required?{U:e.t(e.unref(i).field.required?"*":"")}:{},{V:e.t(e.unref(i).field.name),W:e.unref(i).textColor,X:2*e.unref(i).fontSize+"rpx",Y:e.unref(i).fontWeight,Z:"left"==e.unref(m).completeAlign?1:"",aa:"right"==e.unref(m).completeAlign?1:"",ab:e.t(e.unref(v)),ac:e.unref(i).field.value.start.timestamp||e.unref(i).defaultControl?"":1,ad:e.unref(i).textColor,ae:2*e.unref(i).fontSize+"rpx",af:e.unref(i).textColor,ag:2*e.unref(i).fontSize+"rpx",ah:e.t(e.unref(p)),ai:e.unref(i).field.value.end.timestamp||e.unref(i).defaultControl?"":1,aj:e.unref(i).textColor,ak:2*e.unref(i).fontSize+"rpx",al:e.o(y),am:e.unref(m).borderControl?"":1,an:f.value&&!f.value.code},f.value&&!f.value.code?{ao:e.t(f.value.message)}:{},{ap:e.unref(i).field.remark.text},e.unref(i).field.remark.text?{aq:e.t(e.unref(i).field.remark.text),ar:e.unref(i).field.remark.color,as:2*e.unref(i).field.remark.fontSize+"rpx"}:{},{at:s().length},s().length?{av:e.f(s(),((t,a,r)=>({a:e.t(t.title),b:a,c:e.o((e=>{t.type}))})))}:{}):{},{aw:e.sr("calendar","c78e6ad7-0"),ax:e.o(h),ay:e.o((e=>o.value=!1)),az:e.p({show:o.value,mode:"range",closeOnClickOverlay:"true",defaultDate:e.unref(c),startText:"开始",endText:"结束",confirmDisabledText:"禁止选择",color:"var(--primary-color)",monthNum:"2"}),aA:"decorate"==e.unref(d).mode},(e.unref(d).mode,{}),{aB:e.s(e.unref(g))}))}}),u=e._export_sfc(l,[["__scopeId","data-v-c78e6ad7"]]);tt.createComponent(u);
