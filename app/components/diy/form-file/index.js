"use strict";const e=require("../../../../common/vendor.js"),o=require("../../../../utils/common.js"),r=require("../../../stores/diy.js"),t=require("../../../../locale/index.js"),u=require("../../../api/system.js");if(require("../../../../utils/pages.js"),require("../../../../stores/member.js"),require("../../../api/member.js"),require("../../../../utils/request.js"),require("../../../api/auth.js"),require("../../../../stores/config.js"),require("../../../../stores/system.js"),require("../../../../hooks/useLogin.js"),require("../../../../locale/i18n.js"),require("../../../../locale/language.js"),!Array){e.resolveComponent("u-upload")()}Math;const a=e.defineComponent({__name:"index",props:["component","index","global"],setup(a,{expose:l}){const n=a,i=e.ref(null),d=r.useDiyStore(),s=e.computed((()=>"decorate"==d.mode?d.value[n.index]:n.component)),m=e.computed((()=>n.global)),c=e.computed((()=>{var e="";return e+="position:relative;",s.value.componentStartBgColor&&(s.value.componentStartBgColor&&s.value.componentEndBgColor?e+=`background:linear-gradient(${s.value.componentGradientAngle},${s.value.componentStartBgColor},${s.value.componentEndBgColor});`:e+="background-color:"+s.value.componentStartBgColor+";"),s.value.componentBgUrl&&(e+=`background-image:url('${o.img(s.value.componentBgUrl)}');`,e+="background-size: cover;background-repeat: no-repeat;"),s.value.topRounded&&(e+="border-top-left-radius:"+2*s.value.topRounded+"rpx;"),s.value.topRounded&&(e+="border-top-right-radius:"+2*s.value.topRounded+"rpx;"),s.value.bottomRounded&&(e+="border-bottom-left-radius:"+2*s.value.bottomRounded+"rpx;"),s.value.bottomRounded&&(e+="border-bottom-right-radius:"+2*s.value.bottomRounded+"rpx;"),e}));e.onMounted((()=>{v(),"decorate"==d.mode&&e.watch((()=>s.value),((e,o)=>{e&&e.componentName}))}));const p=()=>{e.index.chooseMessageFile({count:9,type:"all",success:e=>{console.log("选择的微信聊天文件:",e.tempFiles),e.tempFiles.forEach((e=>{u.uploadImage({filePath:e.path,name:"file"}).then((e=>{s.value.field.value.length<Number(s.value.limit)&&s.value.field.value.push(e.data.url)})).catch((()=>{console.error("上传失败")}))}))},fail:e=>{console.error("选择文件失败",e)}})},f=e=>{e.file.forEach((e=>{u.uploadImage({filePath:e.url,name:"file"}).then((e=>{s.value.field.value.length<Number(s.value.limit)&&s.value.field.value.push(e.data.url)})).catch((()=>{console.error("上传失败")}))}))},v=()=>{};return l({verify:()=>({code:!0,message:""}),reset:()=>{}}),(r,u)=>e.e({a:"style-1"==e.unref(m).completeLayout},"style-1"==e.unref(m).completeLayout?e.e({b:e.t(e.unref(s).field.name),c:e.unref(s).textColor,d:2*e.unref(s).fontSize+"rpx",e:e.unref(s).fontWeight,f:e.t(e.unref(s).field.required?"*":""),g:"decorate"==e.unref(d).mode&&e.unref(s).isHidden},"decorate"==e.unref(d).mode&&e.unref(s).isHidden?{h:e.t(e.unref(t.t)("diyForm.hidden"))}:{},{i:e.unref(s).field.remark.text},e.unref(s).field.remark.text?{j:e.t(e.unref(s).field.remark.text),k:e.unref(s).field.remark.color,l:2*e.unref(s).field.remark.fontSize+"rpx"}:{},{m:i.value&&!i.value.code},i.value&&!i.value.code?{n:e.t(i.value.message)}:{},{o:e.f(e.unref(s).field.value,((r,t,u)=>({a:e.unref(o.img)(r),b:e.o((e=>{return o=t,void s.value.field.value.splice(o.index,1);var o})),c:t}))),p:e.o(p),q:e.o(f),r:e.p({accept:"file ",multiple:!0,maxCount:9})}):{},{s:"decorate"==e.unref(d).mode},(e.unref(d).mode,{}),{t:e.s(e.unref(c))})}}),l=e._export_sfc(a,[["__scopeId","data-v-3511697c"]]);tt.createComponent(l);
