"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../stores/member.js"),o=require("../../../../hooks/useLogin.js"),n=require("../../../../utils/common.js"),t=require("../../../../locale/index.js");require("../../../../utils/request.js");const u=require("../../../stores/diy.js"),i=require("../../../../stores/config.js");if(require("../../../api/member.js"),require("../../../api/auth.js"),require("../../../../stores/system.js"),require("../../../api/system.js"),require("../../../../utils/pages.js"),require("../../../../locale/i18n.js"),require("../../../../locale/language.js"),!Array){e.resolveComponent("u-avatar")()}Math;const a=e.defineComponent({__name:"index",props:["component","index","global"],setup(a){const s=a,l=i.useConfigStore(),m=u.useDiyStore(),g=e.computed((()=>"decorate"==m.mode?m.value[s.index]:s.component)),d=e.computed((()=>{var e="";return g.value.componentStartBgColor&&(g.value.componentStartBgColor&&g.value.componentEndBgColor?e+=`background:linear-gradient(${g.value.componentGradientAngle},${g.value.componentStartBgColor},${g.value.componentEndBgColor});`:e+="background-color:"+g.value.componentStartBgColor+";"),g.value.bgUrl&&(e+="background-image:url("+n.img(g.value.bgUrl)+");",e+="background-size: 100%;",e+="background-repeat: no-repeat;"),g.value.topRounded&&(e+="border-top-left-radius:"+2*g.value.topRounded+"rpx;"),g.value.topRounded&&(e+="border-top-right-radius:"+2*g.value.topRounded+"rpx;"),g.value.bottomRounded&&(e+="border-bottom-left-radius:"+2*g.value.bottomRounded+"rpx;"),g.value.bottomRounded&&(e+="border-bottom-right-radius:"+2*g.value.bottomRounded+"rpx;"),e})),p=r.useMemberStore(),c=e.computed((()=>"decorate"==m.mode?{headimg:"",nickname:"昵称",balance:0,point:0,money:0,member_no:"NIU0000021"}:p.info)),f=e.computed((()=>{if(c.value){let e=parseFloat(c.value.balance)+parseFloat(c.value.money);return n.moneyFormat(e.toString())}return 0})),b=()=>{let r=!l.login.is_username&&!l.login.is_mobile&&!l.login.is_bind_mobile,n=!l.login.is_auth_register;r&&n?e.index.showToast({title:"商家未开启登录注册",icon:"none"}):l.login.is_username||l.login.is_mobile||l.login.is_bind_mobile?o.useLogin().setLoginBack({url:"/app/pages/member/index"}):r&&l.login.is_auth_register&&!l.login.is_force_access_user_info?o.useLogin().getAuthCode():(l.login.is_auth_register&&l.login.is_force_access_user_info||l.login.is_auth_register&&l.login.is_bind_mobile)&&o.useLogin().setLoginBack({url:"/app/pages/member/index"})};e.ref(!1);const _=()=>{};return e.index.getMenuButtonBoundingClientRect(),(r,o)=>{var u;return e.e({a:e.unref(c)},e.unref(c)?{b:e.o(_),c:e.p({src:e.unref(n.img)(e.unref(c).headimg),size:"55",leftIcon:"none","default-url":e.unref(n.img)("static/resource/images/default_headimg.png")}),d:e.t(e.unref(c).nickname),e:e.unref(g).textColor,f:e.t(e.unref(c).member_no),g:e.unref(g).textColor,h:e.unref(g).textColor,i:e.o((r=>e.unref(n.redirect)({url:"/app/pages/setting/index"})))}:{j:e.o(b),k:e.p({src:e.unref(n.img)("static/resource/images/default_headimg.png"),size:"55"}),l:e.t(e.unref(t.t)("login")),m:e.t(e.unref(t.t)("register")),n:e.unref(g).textColor,o:e.o(b),p:e.unref(g).textColor,q:e.o((r=>e.unref(n.redirect)({url:"/app/pages/setting/index"})))},{r:e.t(e.unref(f)),s:e.o((r=>e.unref(n.redirect)({url:e.unref(c)?"/app/pages/member/balance":""}))),t:e.unref(g).textColor,v:e.t(e.unref(t.t)("balance")),w:e.o((r=>e.unref(n.redirect)({url:e.unref(c)?"/app/pages/member/balance":""}))),x:e.unref(g).textColor,y:e.t(parseInt(null==(u=e.unref(c))?void 0:u.point)||0),z:e.o((r=>e.unref(n.redirect)({url:e.unref(c)?"/app/pages/member/point":""}))),A:e.unref(g).textColor,B:e.t(e.unref(t.t)("point")),C:e.o((r=>e.unref(n.redirect)({url:e.unref(c)?"/app/pages/member/point":""}))),D:e.unref(g).textColor,E:e.s(e.unref(d))})}}});tt.createComponent(a);
