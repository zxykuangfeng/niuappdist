"use strict";const e=require("../../../common/vendor.js"),l=require("../../api/member.js"),a=require("../../../utils/common.js"),r=require("../../../stores/member.js"),t=require("../../../utils/topTabbar.js");if(require("../../../utils/request.js"),require("../../../locale/index.js"),require("../../../locale/i18n.js"),require("../../../locale/language.js"),require("../../../utils/pages.js"),require("../../../stores/system.js"),require("../../api/system.js"),require("../../../stores/config.js"),require("../../api/auth.js"),require("../../stores/diy.js"),require("../../../hooks/useLogin.js"),!Array){(e.resolveComponent("loading-page")+e.resolveComponent("top-tabbar"))()}Math||((()=>"../../../components/loading-page/loading-page.js")+(()=>"../../../components/top-tabbar/top-tabbar.js"))();const u=e.defineComponent({__name:"level",setup(u){const v=r.useMemberStore(),n=e.ref(!1),i=e.ref([]),o=e.ref([]),s=e.ref(0),f=e.ref(0),g=t.topTabar();let c=g.setTopTabbarParam({title:"会员等级"});e.onShow((()=>{a.getToken()&&(x(),b())}));const m=e.computed((()=>v.info)),_=e=>{let l=e,a=100;return i.value[l]&&i.value[l].growth&&(a=m.value.growth/i.value[l].growth*100),a},d=e.ref(""),p=e.ref(""),h=e.ref(""),b=()=>{n.value=!0,l.getMemberLevel().then((e=>{i.value=e.data||[];let l=!0;m.value&&i.value&&i.value.length&&i.value.forEach(((e,a)=>{e.level_id==m.value.member_level&&(l=!1,s.value=a,f.value=s.value,q(a))})),l&&q(0),i.value&&i.value.length>=5?(d.value="width:115rpx;",p.value="max-width:115rpx;",h.value="width:460rpx;transform: translateX(-235rpx);"):i.value&&4==i.value.length?(d.value="width:144rpx;",p.value="max-width:144rpx;",h.value="width:436rpx;transform: translateX(-218rpx);"):i.value&&3==i.value.length?(d.value="width:192rpx;",p.value="max-width:192rpx;",h.value="width:388rpx;transform: translateX(-194rpx);"):i.value&&2==i.value.length?(d.value="width:289rpx;",p.value="max-width:289rpx;",h.value="width:289rpx;transform: translateX(-144rpx);"):(p.value="max-width:578rpx;",d.value="width:100%;"),n.value=!1})).catch((()=>{n.value=!1}))},x=()=>{l.getTaskGrowth().then((e=>{o.value=e.data}))},w=e=>{s.value=e.detail.current,f.value=s.value,q(e.detail.current)},j=e.ref({}),q=e=>{let l=a.deepClone(i.value[e]);if(l&&l.level_benefits&&(l.benefits_arr=[],Object.values(l.level_benefits).forEach(((e,a,r)=>{e.content&&l.benefits_arr.push(e.content)}))),l&&l.level_gifts){l.gifts_arr=[];for(let e in l.level_gifts)l.level_gifts[e].content&&(l.level_gifts[e].content.forEach(((l,a,r)=>{r[a].type=e})),l.gifts_arr=l.gifts_arr.concat(l.level_gifts[e].content))}j.value=l};return(l,r)=>e.e({a:e.p({loading:n.value&&e.unref(m)}),b:!n.value&&e.unref(m)&&i.value&&i.value.length},!n.value&&e.unref(m)&&i.value&&i.value.length?e.e({c:e.p({data:e.unref(c),scrollBool:e.unref(g).getScrollBool()}),d:e.f(i.value,((l,r,t)=>e.e({a:e.unref(m).member_level==l.level_id&&s.value==r},e.unref(m).member_level==l.level_id&&s.value==r?{b:"url("+e.unref(a.img)(j.value.level_tag)+") no-repeat",c:j.value.level_style.level_color}:{},{d:e.unref(a.img)(l.level_icon?l.level_icon:""),e:e.t(l.level_name),f:e.t(i.value[r].growth),g:_(r),h:s.value!=r?1:"",i:e.unref(a.img)(l.level_bg),j:s.value!=r?1:"",k:l.id}))),e:j.value.level_style.level_color,f:e.t(e.unref(m).growth),g:j.value.level_style.level_color,h:j.value.level_style.level_color,i:e.o(w),j:s.value,k:e.s(h.value),l:e.f(i.value,((l,a,r)=>({a:f.value==a?1:"",b:e.t(l.level_name),c:f.value==a?1:"",d:e.o((e=>(e=>{f.value=e,s.value=e,q(e)})(a))),e:"id"+a,f:l.id}))),m:e.s(p.value),n:e.s(d.value),o:"id"+(f.value?f.value-1:0),p:j.value.benefits_arr&&j.value.benefits_arr.length},j.value.benefits_arr&&j.value.benefits_arr.length?{q:e.f(j.value.benefits_arr,((l,r,t)=>({a:e.unref(a.img)(l.icon),b:e.t(l.title),c:r}))),r:"url("+e.unref(a.img)(j.value.member_bg)+")"}:{},{s:j.value.gifts_arr&&j.value.gifts_arr.length},j.value.gifts_arr&&j.value.gifts_arr.length?{t:e.f(j.value.gifts_arr,((l,r,t)=>({a:"url("+e.unref(a.img)(l.background)+") no-repeat",b:e.t(l.text),c:r,d:(r+1)%3!=0?1:""})))}:{},{v:o.value&&o.value.length},o.value&&o.value.length?{w:e.f(o.value,((l,r,t)=>({a:e.unref(a.img)(l.icon),b:e.t(l.title),c:e.t(l.desc),d:e.t(l.button.text),e:e.o((r=>e.unref(a.redirect)({url:l.button.wap_redirect,param:{},mode:"redirectTo"}))),f:r})))}:{},{x:`linear-gradient( 180deg, ${j.value.level_style.gift} 0%, #FFFFFF 20%)`,y:j.value.level_style.bg_color}):{},{z:!(n.value||i.value&&i.value.length)},n.value||i.value&&i.value.length?{}:{A:e.unref(a.img)("static/resource/images/empty.png")},{B:e.s(l.themeColor())})}}),v=e._export_sfc(u,[["__scopeId","data-v-26e40893"]]);tt.createPage(v);
