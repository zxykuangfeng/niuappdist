"use strict";const e=require("../../../common/vendor.js"),a=require("../../../locale/index.js"),t=require("../../../utils/common.js"),r=require("../../api/member.js"),u=require("../../../utils/wechat.js"),s=require("../../../stores/config.js");if(require("../../../locale/i18n.js"),require("../../../locale/language.js"),require("../../../utils/pages.js"),require("../../../stores/system.js"),require("../../api/system.js"),require("../../../utils/request.js"),require("../../../stores/member.js"),require("../../api/auth.js"),require("../../stores/diy.js"),require("../../../hooks/useLogin.js"),!Array){(e.resolveComponent("u-steps-item")+e.resolveComponent("u-steps")+e.resolveComponent("u-avatar")+e.resolveComponent("loading-page"))()}Math||((()=>"../../../node-modules/uview-plus/components/u-steps-item/u-steps-item.js")+(()=>"../../../node-modules/uview-plus/components/u-steps/u-steps.js")+(()=>"../../../node-modules/uview-plus/components/u-avatar/u-avatar.js")+(()=>"../../../components/loading-page/loading-page.js"))();const n=e.defineComponent({__name:"cash_out_detail",setup(n){const l=e.ref({}),v=e.ref(0),o=e.ref(!0),i=e.ref(!1);let f=null,c=e.index.getStorageSync("openid")||"";e.onLoad((e=>{let a=e.id||"";if(a)m(a);else{let e={url:"/app/pages/member/cash_out",title:"提现详情不存在",mode:"reLaunch"};t.goback(e)}}));const m=e=>{o.value=!0,r.getCashOutDetail(e).then((e=>{l.value=e.data,"wechatpay"==l.value.transfer_type&&(1==l.value.status?v.value=0:2==l.value.status||4==l.value.status?v.value=1:3==l.value.status&&(v.value=2)),o.value=!1})).catch((()=>{o.value=!1}))},p=()=>{if(!c)return e.index.showToast({title:"请到微信公众号或小程序中进行提现",icon:"none"}),!1;if(i.value)return!1;i.value=!0;let a={id:l.value.id,open_id:c};r.getCashOutTransfer(a).then((e=>{let a={mchId:e.data.extra.mch_id,appId:e.data.extra.appid,package:e.data.package_info};u.wechat.transfer(a,(e=>{i.value=!1,f=setTimeout((()=>{m(l.value.id),clearTimeout(f)}),6e3)}))})).catch((e=>{i.value=!1}))},_=()=>{if(!c)return e.index.showToast({title:"请到微信公众号或小程序中进行提现",icon:"none"}),!1;if(i.value)return!1;i.value=!0;let a={mchId:l.value.transfer.extra.mch_id,appId:l.value.transfer.extra.appid,package:l.value.transfer.package_info};u.wechat.transfer(a,(e=>{i.value=!1,f=setTimeout((()=>{m(l.value.id),clearTimeout(f)}),6e3)}))},d=()=>{e.index.showModal({title:"提示",content:"您确定取消提现吗？",confirmColor:s.useConfigStore().themeColor["--primary-color"],success:e=>{e.confirm&&r.memberCancel({id:l.value.id}).then((()=>{f=setTimeout((()=>{m(l.value.id),clearTimeout(f)}))}))}})};return e.onUnload((()=>{})),(r,u)=>e.e({a:!o.value},o.value?{}:e.e({b:e.t(l.value.apply_money),c:e.t(l.value.status_name),d:1==l.value.status?1:"",e:4==l.value.status?1:"",f:e.t(e.unref(a.t)("cashOutNo")),g:e.t(l.value.cash_out_no),h:Number(l.value.service_money)},Number(l.value.service_money)?{i:e.t(e.unref(a.t)("serviceMoney")),j:e.t(l.value.service_money)}:{},{k:e.t(e.unref(a.t)("createTime")),l:e.t(l.value.create_time),m:l.value.status&&l.value.audit_time},l.value.status&&l.value.audit_time?{n:e.t(e.unref(a.t)("auditTime")),o:e.t(l.value.audit_time)}:{},{p:-1==l.value.status&&l.value.refuse_reason},-1==l.value.status&&l.value.refuse_reason?{q:e.t(e.unref(a.t)("refuseReason")),r:e.t(l.value.refuse_reason)}:{},{s:3==l.value.status},3==l.value.status?{t:e.t(e.unref(a.t)("transferTypeName")),v:e.t(l.value.transfer_type_name)}:{},{w:"wechatpay"==l.value.transfer_type&&(2==l.value.status||3==l.value.status||4==l.value.status)},"wechatpay"!=l.value.transfer_type||2!=l.value.status&&3!=l.value.status&&4!=l.value.status?{}:{x:e.p({title:"提现申请",desc:l.value.create_time}),y:e.p({title:"处理中",desc:l.value.audit_time?l.value.audit_time:""}),z:e.p({title:"提现成功",desc:l.value.transfer_time?l.value.transfer_time:""}),A:e.p({current:v.value,direction:"column",activeColor:"var(--primary-color)",activeIcon:"checkmark-circle-fill",inactiveIcon:"checkmark-circle-fill"})},{B:e.t(e.unref(a.t)("proceedsInfo")),C:e.t(e.unref(a.t)("transferAccount")),D:e.t("wechatpay"==l.value.transfer_type?"微信零钱":l.value.transfer_account),E:"wechatpay"==l.value.transfer_type},"wechatpay"==l.value.transfer_type?{F:e.t(e.unref(a.t)("transferNickname")),G:e.t(l.value.nickname),H:e.t(e.unref(a.t)("transferImg")),I:e.p({src:e.unref(t.img)(l.value.headimg),size:"30",leftIcon:"none","default-url":e.unref(t.img)("static/resource/images/default_headimg.png")})}:{},{J:"wechatpay"!==l.value.transfer_type},"wechatpay"!==l.value.transfer_type?e.e({K:e.t("bank"==l.value.transfer_type?e.unref(a.t)("bankRealname"):e.unref(a.t)("realname")),L:e.t(l.value.transfer_realname),M:l.value.transfer_bank},l.value.transfer_bank?{N:e.t(e.unref(a.t)("transferBank")),O:e.t(l.value.transfer_bank)}:{},{P:"wechat_code"==l.value.transfer_type||"alipay"==l.value.transfer_type},"wechat_code"==l.value.transfer_type||"alipay"==l.value.transfer_type?{Q:e.t(e.unref(a.t)("transferCode")),R:e.unref(t.img)(l.value.transfer_payment_code),S:e.o((a=>{e.index.previewImage({urls:[t.img(l.value.transfer_payment_code)],indicator:"number",loop:!0})}))}:{}):{},{T:3==l.value.status},3==l.value.status?e.e({U:e.t(e.unref(a.t)("transferInfo")),V:l.value.transfer_time},l.value.transfer_time?{W:e.t(e.unref(a.t)("transferTime")),X:e.t(l.value.transfer_time)}:{},{Y:l.value.transfer_no},l.value.transfer_no?{Z:e.t(e.unref(a.t)("transferNo")),aa:e.t(l.value.transfer.transfer_no)}:{},{ab:l.value.transfer&&l.value.transfer.transfer_remark},l.value.transfer&&l.value.transfer.transfer_remark?{ac:e.t(e.unref(a.t)("transferRemark")),ad:e.t(l.value.transfer.transfer_remark)}:{},{ae:l.value.transfer&&l.value.transfer.transfer_voucher},l.value.transfer&&l.value.transfer.transfer_voucher?{af:e.t(e.unref(a.t)("transferVoucher")),ag:e.unref(t.img)(l.value.transfer.transfer_voucher),ah:e.o((a=>{e.index.previewImage({urls:[t.img(l.value.transfer.transfer_voucher)],indicator:"number",loop:!0})}))}:{}):{},{ai:1==l.value.status||2==l.value.status||4==l.value.status},(1==l.value.status||2==l.value.status||l.value.status,{}),{aj:1==l.value.status||2==l.value.status||4==l.value.status},1==l.value.status||2==l.value.status||4==l.value.status?e.e({ak:1==l.value.status||2==l.value.status||4==l.value.status},1==l.value.status||2==l.value.status||4==l.value.status?{al:e.t(e.unref(a.t)("cashOutCancel")),am:e.o(d)}:{},{an:"wechatpay"==l.value.transfer_type&&2==l.value.status},"wechatpay"==l.value.transfer_type&&2==l.value.status?{ao:e.t(e.unref(a.t)("cashOutNow")),ap:i.value,aq:e.o(p)}:"wechatpay"==l.value.transfer_type&&4==l.value.status?{as:e.t(e.unref(a.t)("cashOutNow")),at:i.value,av:e.o(_)}:{},{ar:"wechatpay"==l.value.transfer_type&&4==l.value.status}):{}),{aw:e.p({loading:o.value}),ax:e.s(r.themeColor())})}}),l=e._export_sfc(n,[["__scopeId","data-v-494c99f5"]]);tt.createPage(l);
