"use strict";const e=require("../../../common/vendor.js"),t=require("../../../locale/index.js"),o=require("../../../utils/common.js"),a=require("../../../stores/member.js"),r=require("../../api/member.js"),n=require("../../../components/mescroll/hooks/useMescroll.js"),u=require("../../../utils/topTabbar.js");if(require("../../../locale/i18n.js"),require("../../../locale/language.js"),require("../../../utils/pages.js"),require("../../../stores/system.js"),require("../../api/system.js"),require("../../../utils/request.js"),require("../../../stores/config.js"),require("../../api/auth.js"),require("../../stores/diy.js"),require("../../../hooks/useLogin.js"),!Array){e.resolveComponent("loading-page")()}Math||(c+s+(()=>"../../../components/loading-page/loading-page.js")+l)();const s=()=>"../../../components/mescroll/mescroll-body/mescroll-body.js",c=()=>"../../../components/mescroll/mescroll-empty/mescroll-empty.js",l=()=>"../../../components/select-date/select-date.js",m=e.defineComponent({__name:"commission",setup(s){const{downCallback:c,mescrollInit:l,getMescroll:m}=n.useMescroll(e.onPageScroll,e.onReachBottom),i=a.useMemberStore();e.computed((()=>i.info));const f=()=>{e.index.setStorageSync("cashOutAccountType","commission"),o.redirect({url:"/app/pages/member/apply_cash_out"})};u.topTabar().setTopTabbarParam({title:"我的佣金",topStatusBar:{bgColor:"#fff",textColor:"#333"}});let g={};g=e.index.getMenuButtonBoundingClientRect();const p=e.computed((()=>({backgroundImage:"url("+o.img("static/resource/images/member/commission/commission_bg.png")+") ",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"bottom"}))),_=e.computed((()=>Object.keys(g).length?2*Number(g.height)+2*g.top+470+16+"rpx":"470rpx")),d=e.ref({from_type:"",account_data_gt:""}),v=e.ref([{name:"全部",from_type:"",account_data_gt:""},{name:"佣金",from_type:"",account_data_gt:0},{name:"提现",from_type:"cash_out",account_data_gt:""}]),y=e.ref([]),b=e.ref([]),j=e.ref(!0),h=e.ref(!0),q=e.ref(null),k=e=>{h.value=!0;let t={page:e.num,limit:e.size,from_type:d.value.from_type,account_data_gt:d.value.account_data_gt,create_time:y.value};r.getMemberCommission(t).then((t=>{let o=t.data.data;e.endSuccess(o.length),1==e.num&&(b.value=[]),b.value=b.value.concat(o),h.value=!1,j.value=!1})).catch((()=>{h.value=!1,j.value=!1,e.endErr()}))},C=e.ref(),S=()=>{C.value.show=!0},M=e=>{y.value=e,b.value=[],m().resetUpScroll()};return(a,r)=>{var n,u;return e.e({a:e.unref(i).info},e.unref(i).info?e.e({b:e.s(e.unref(p)),c:e.t(e.unref(t.t)("accountCommission")),d:e.t(e.unref(i).info?e.unref(o.moneyFormat)(e.unref(i).info.commission):"0.00"),e:e.t(e.unref(t.t)("transferMoney")),f:e.o(f),g:e.t(e.unref(o.moneyFormat)(null==(n=e.unref(i).info)?void 0:n.commission_get)||"0.00"),h:e.t(e.unref(t.t)("commission")),i:e.t(e.unref(o.moneyFormat)(null==(u=e.unref(i).info)?void 0:u.commission_cash_outing)||"0.00"),j:e.t(e.unref(t.t)("money")),k:"url("+e.unref(o.img)("static/resource/images/member/commission/account_bg.png")+")",l:e.f(v.value,((t,o,a)=>({a:e.t(t.name),b:d.value.from_type===t.from_type&&d.value.account_data_gt===t.account_data_gt?1:"",c:e.o((e=>{return o=t,d.value.from_type=o.from_type,d.value.account_data_gt=o.account_data_gt,void m().resetUpScroll();var o}))}))),m:e.o(S),n:b.value.length},b.value.length?{o:e.f(b.value,((t,o,a)=>({a:e.t(t.account_data>0?"收":"提"),b:t.account_data>0?1:"",c:t.account_data<=0?1:"",d:e.t(t.from_type_name),e:e.t(t.create_time),f:e.t(t.account_data>0?"+"+t.account_data:t.account_data),g:t.account_data>0?1:"",h:t.account_data<=0?1:"",i:t.id,j:o?1:""})))}:{},{p:!b.value.length&&!j.value&&!h.value},(b.value.length||j.value||h.value,{}),{q:e.sr(q,"47e41ee3-0",{k:"mescrollRef"}),r:e.o(e.unref(l)),s:e.o(k),t:e.p({down:{use:!1},top:e.unref(_)}),v:e.p({loading:j.value}),w:e.sr(C,"47e41ee3-3",{k:"selectDateRef"}),x:e.o(M),y:e.s(a.themeColor())}):{})}}});m.__runtimeHooks=1,tt.createPage(m);
