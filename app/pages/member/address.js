"use strict";const e=require("../../../common/vendor.js"),s=require("../../../utils/common.js"),r=require("../../api/member.js"),a=require("../../../locale/index.js");require("../../../utils/pages.js"),require("../../stores/diy.js"),require("../../../hooks/useLogin.js"),require("../../../utils/request.js"),require("../../../stores/member.js"),require("../../api/auth.js"),require("../../../stores/config.js"),require("../../../stores/system.js"),require("../../api/system.js"),require("../../../locale/i18n.js"),require("../../../locale/language.js"),Math||t();const t=()=>"../../../components/mescroll/mescroll-empty/mescroll-empty.js",l=e.defineComponent({__name:"address",setup(t){const l=e.ref(!0),d=e.ref(0),u=e.ref([]),o=e.ref(""),i=e.ref("");e.onLoad((s=>{o.value=s.type||"",i.value=s.source||"",s.type&&(d.value="address"==s.type?0:1),e.index.getStorageSync("selectAddressCallback")&&e.index.removeStorage({key:"selectAddressCallback"})}));e.onShow((()=>{r.getAddressList({}).then((({data:e})=>{const s=[],r=[];e.forEach((e=>{"address"==e.type?s.push(e):r.push(e)})),i.value?u.value=0==d.value?s:r:u.value=e,l.value=!1})).catch((()=>{l.value=!1}))}));const c=()=>{s.redirect({url:"/app/pages/member/address_edit",param:{source:i.value}})};return(t,d)=>e.e({a:!l.value},l.value?{}:e.e({b:u.value.length},u.value.length?{c:e.f(u.value,((a,t,l)=>({a:e.t(a.name),b:e.t(e.unref(s.mobileHide)(a.mobile)),c:e.t(a.full_address),d:e.o((r=>(r=>{const a=e.index.getStorageSync("selectAddressCallback");a&&(a.address_id=r.id,e.index.setStorage({key:"selectAddressCallback",data:a,success(){s.redirect({url:a.back,mode:"redirectTo"})}}))})(a))),e:a.is_default?1:"",f:a.is_default?"":1,g:e.o((e=>(e=>{const s=u.value[e];s.is_default||(s.is_default=1,r.editAddress(s).then((()=>{u.value.forEach(((s,r)=>{s.is_default&&(s.is_default=0),r==e&&(s.is_default=1)}))})).catch())})(t))),h:e.o((e=>{return r=a.id,void s.redirect({url:"/app/pages/member/address_edit",param:{id:r,source:i.value}});var r})),i:e.o((e=>(e=>{const s=u.value[e];r.deleteAddress(s.id).then((()=>{u.value.splice(e,1)})).catch()})(t)))})))}:{},{d:!u.value.length},u.value.length?{}:{e:e.p({option:{tip:"暂无收货地址"}})},{f:e.t(e.unref(a.t)("createAddress")),g:e.o(c),h:e.s(t.themeColor())}))}}),d=e._export_sfc(l,[["__scopeId","data-v-4a5b7c65"]]);tt.createPage(d);
