"use strict";const e=require("../../../common/vendor.js"),o=require("../../../locale/index.js"),r=require("../../api/system.js"),s=require("../../../utils/common.js"),t=require("../../../utils/topTabbar.js");if(require("../../../locale/i18n.js"),require("../../../locale/language.js"),require("../../../utils/pages.js"),require("../../../stores/system.js"),require("../../../stores/config.js"),require("../../api/auth.js"),require("../../../utils/request.js"),require("../../../stores/member.js"),require("../../api/member.js"),require("../../stores/diy.js"),require("../../../hooks/useLogin.js"),!Array){(e.resolveComponent("u-input")+e.resolveComponent("u-form-item")+e.resolveComponent("sms-code")+e.resolveComponent("u-icon")+e.resolveComponent("u-form"))()}Math||((()=>"../../../node-modules/uview-plus/components/u-input/u-input.js")+(()=>"../../../node-modules/uview-plus/components/u-form-item/u-form-item.js")+(()=>"../../../components/sms-code/sms-code.js")+(()=>"../../../node-modules/uview-plus/components/u-icon/u-icon.js")+(()=>"../../../node-modules/uview-plus/components/u-form/u-form.js"))();const l=e.defineComponent({__name:"resetpwd",setup(l){let a={};a=e.index.getMenuButtonBoundingClientRect();t.topTabar().setTopTabbarParam({title:"",topStatusBar:{bgColor:"#fff",textColor:"#333"}}),e.computed((()=>Object.keys(a).length?s.pxToRpx(Number(a.height))+s.pxToRpx(a.top)+s.pxToRpx(8)+"rpx":"auto"));const i=e.reactive({mobile:"",mobile_code:"",mobile_key:"",password:"",confirm_password:""}),n=e.ref(!0);e.onMounted((()=>{setTimeout((()=>{n.value=!1}),800)}));const u=e.ref(!1),p=e.ref(null),d=e.ref(!0),m=e.ref(!0),c=()=>{d.value=!d.value},b=()=>{m.value=!m.value},f={password:{type:"string",required:!0,message:o.t("passwordPlaceholder"),trigger:["blur","change"]},confirm_password:[{type:"string",required:!0,message:o.t("confirmPasswordPlaceholder"),trigger:["blur","change"]},{validator:(e,o)=>o==i.password,message:o.t("confirmPasswordError"),trigger:["change","blur"]}],mobile:[{type:"string",required:!0,message:o.t("mobilePlaceholder"),trigger:["blur","change"]},{validator:(o,r)=>e.index.$u.test.mobile(r),message:o.t("mobileError"),trigger:["change","blur"]}],mobile_code:{type:"string",required:!0,message:o.t("codePlaceholder"),trigger:["blur","change"]}},g=()=>{p.value.validate().then((()=>{u.value||(u.value=!0,r.resetPassword(i).then((e=>{s.redirect({url:"/app/pages/auth/login",mode:"redirectTo"})})).catch((()=>{u.value=!1})))}))};return(r,s)=>e.e({a:e.t(e.unref(o.t)("findPassword")),b:e.t(e.unref(o.t)("findPasswordTip")),c:e.o((e=>i.mobile=e)),d:e.p({type:"number",maxlength:"11",border:"none",placeholder:e.unref(o.t)("mobilePlaceholder"),disabled:n.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]",modelValue:i.mobile}),e:e.p({label:"",prop:"mobile","border-bottom":!1}),f:e.o((e=>i.mobile_key=e)),g:e.p({mobile:i.mobile,type:"find_pass",modelValue:i.mobile_key}),h:e.o((e=>i.mobile_code=e)),i:e.p({type:"number",maxlength:"4",border:"none",placeholder:e.unref(o.t)("codePlaceholder"),disabled:n.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]",modelValue:i.mobile_code}),j:e.p({label:"",prop:"code","border-bottom":!1}),k:i.password},i.password?{l:e.p({name:d.value?"eye-off":"eye-fill",color:"#b9b9b9",size:"20"}),m:e.o(c)}:{},{n:e.o((e=>i.password=e)),o:e.p({border:"none",password:d.value,maxlength:"40",placeholder:e.unref(o.t)("passwordPlaceholder"),disabled:n.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]",modelValue:i.password}),p:e.p({label:"",prop:"password","border-bottom":!1}),q:i.confirm_password},i.confirm_password?{r:e.p({name:m.value?"eye-off":"eye-fill",color:"#b9b9b9",size:"20"}),s:e.o(b)}:{},{t:e.o((e=>i.confirm_password=e)),v:e.p({border:"none",password:m.value,maxlength:"40",placeholder:e.unref(o.t)("confirmPasswordPlaceholder"),disabled:n.value,fontSize:"26rpx",placeholderClass:"!text-[var(--text-color-light9)] text-[26rpx]",modelValue:i.confirm_password}),w:e.p({label:"",prop:"confirm_password","border-bottom":!1}),x:e.sr(p,"534e6bfb-0",{k:"formRef"}),y:e.p({labelPosition:"left",model:i,errorType:"toast",rules:f}),z:e.t(e.unref(o.t)("confirm")),A:e.o(g),B:e.s(r.themeColor())})}}),a=e._export_sfc(l,[["__scopeId","data-v-534e6bfb"]]);tt.createPage(a);
