"use strict";const e=require("../../../common/vendor.js"),t=require("../../api/pay.js"),r=require("../../../locale/index.js"),a=require("../../../utils/common.js"),o=require("../../../utils/pages.js"),s=require("../../../utils/topTabbar.js");if(require("../../../utils/request.js"),require("../../../stores/member.js"),require("../../api/member.js"),require("../../api/auth.js"),require("../../../stores/config.js"),require("../../stores/diy.js"),require("../../../hooks/useLogin.js"),require("../../../stores/system.js"),require("../../api/system.js"),require("../../../locale/i18n.js"),require("../../../locale/language.js"),!Array){(e.resolveComponent("top-tabbar")+e.resolveComponent("u-loading-icon")+e.resolveComponent("u-modal"))()}Math||((()=>"../../../components/top-tabbar/top-tabbar.js")+(()=>"../../../node-modules/uview-plus/components/u-loading-icon/u-loading-icon.js")+(()=>"../../../node-modules/uview-plus/components/u-modal/u-modal.js"))();const u=e.defineComponent({__name:"result",setup(u){const n=e.ref(null),i=e.ref(!1);let l="",c=0,m=0;let p=s.topTabar().setTopTabbarParam({title:"",isBack:!1});e.onLoad((e=>{l=e.trade_type,c=e.trade_id,d()}));const d=()=>{t.getPayInfo(l,c,{}).then((t=>{if(!e.index.$u.test.isEmpty(t.data)){if(1==t.data.status&&m<5)return i.value=!0,m++,void setTimeout((()=>{d()}),1e3);n.value=t.data,i.value=!1}}))},v=()=>{var t;const r=decodeURIComponent(e.index.getStorageSync("payReturn"));r?a.redirect({url:r,mode:"reLaunch"}):a.redirect({url:o.getFirstPage(),param:{code:null==(t=n.value)?void 0:t.out_trade_no},mode:"reLaunch"})};return(t,o)=>e.e({a:n.value},n.value?{b:e.sr("topTabbarRef","16bac4de-0"),c:e.p({data:e.unref(p)}),d:2==n.value.status?1:"",e:2!=n.value.status?1:"",f:e.t(2==n.value.status?"支付成功":"支付失败"),g:2==n.value.status?1:"",h:2!=n.value.status?1:"",i:e.t(e.unref(r.t)("currency")),j:e.t(e.unref(a.moneyFormat)(n.value.money)),k:e.t(2==n.value.status?e.unref(r.t)("complete"):e.unref(r.t)("close")),l:e.o(v)}:{},{m:e.p({text:e.unref(r.t)("pay.getting"),textSize:"16",mode:"circle",vertical:!0}),n:e.o(v),o:e.p({show:i.value,showCancelButton:!0,confirmText:e.unref(r.t)("pay.completePay"),cancelText:e.unref(r.t)("pay.incompletePay"),confirmColor:"var(--primary-color)"}),p:e.s(t.themeColor())})}});tt.createPage(u);
