"use strict";const e=require("../../../common/vendor.js"),r=require("../../../utils/common.js"),a=require("../../api/verify.js");if(require("../../../locale/i18n.js"),require("../../../stores/system.js"),require("../../../utils/request.js"),require("../../../utils/pages.js"),require("../../stores/diy.js"),require("../../../hooks/useLogin.js"),require("../../../stores/member.js"),require("../../api/member.js"),require("../../api/auth.js"),require("../../../stores/config.js"),require("../../../locale/language.js"),require("../../api/system.js"),require("../../../locale/index.js"),!Array){e.resolveComponent("loading-page")()}Math;const s=e.defineComponent({__name:"index",setup(s){const u=e.ref("manualInput");u.value="sweepCode";const i=e.ref(!1),o=e.ref(""),t=e.ref(!0),n=e.ref(!1);e.onShow((()=>{r.getToken()&&l()}));const l=()=>{a.getCheckVerifier().then((e=>{e.data?(n.value=!0,t.value=!1):(n.value=!1,t.value=!1)}))},c=()=>{e.index.scanCode({onlyFromCamera:!0,success:a=>{if("scanCode:ok"==a.errMsg){let e=a.result;r.redirect({url:"/app/pages/verify/verify",param:{code:e}})}else e.index.showToast({title:a.errorMsg,icon:"none"})}})};let v=!1;const p=()=>/[\S]+/.test(o.value)?!v&&(v=!0,void a.getVerifierInfo({code:o.value}).then((e=>{v=!1,r.redirect({url:"/app/pages/verify/verify",param:{code:o.value}})})).catch((()=>{v=!1}))):(e.index.showToast({title:"请输入核销码",icon:"none"}),!1),m=()=>{i.value=!i.value},g=e=>{u.value=e};return(a,s)=>e.e({a:!t.value&&n.value},!t.value&&n.value?{b:e.o((a=>e.unref(r.redirect)({url:"/app/pages/verify/record"}))),c:e.unref(r.img)("static/resource/images/verify/saoma.png"),d:e.o(c),e:"sweepCode"==u.value,f:e.unref(r.img)("static/resource/images/verify/shuruhexiaoma.png"),g:e.unref(r.img)("static/resource/images/verify/youjiantou.png"),h:e.unref(r.img)("static/resource/images/verify/hexiao1.png"),i:i.value,j:o.value,k:e.o((e=>o.value=e.detail.value)),l:e.o(p),m:"manualInput"==u.value,n:e.o((e=>g("sweepCode"))),o:"sweepCode"==u.value?1:"",p:e.o(m),q:"manualInput"==u.value?1:"",r:e.o((e=>g("manualInput")))}:{},{s:!t.value&&!n.value},t.value||n.value?{}:{t:e.unref(r.img)("static/resource/images/system/empty.png")},{v:e.p({loading:t.value}),w:e.s(a.themeColor())})}}),u=e._export_sfc(s,[["__scopeId","data-v-70b4fc1d"]]);tt.createPage(u);
