"use strict";const e=require("../../../common/vendor.js"),r=require("../../../components/mescroll/hooks/useMescroll.js"),o=require("../../api/verify.js"),s=require("../../../utils/common.js");if(require("../../../utils/request.js"),require("../../../stores/member.js"),require("../../api/member.js"),require("../../api/auth.js"),require("../../../stores/config.js"),require("../../stores/diy.js"),require("../../../hooks/useLogin.js"),require("../../../stores/system.js"),require("../../api/system.js"),require("../../../locale/index.js"),require("../../../locale/i18n.js"),require("../../../locale/language.js"),require("../../../utils/pages.js"),!Array){e.resolveComponent("u--image")()}Math||((()=>"../../../node-modules/uview-plus/components/u--image/u--image.js")+t+l+a)();const l=()=>"../../../components/mescroll/mescroll-body/mescroll-body.js",t=()=>"../../../components/mescroll/mescroll-empty/mescroll-empty.js",a=()=>"../../../components/select-date/select-date.js",u=e.defineComponent({__name:"record",setup(l){const t=e.ref(""),a=e.ref([]),u=e.ref([]),i=e.ref(!1),{mescrollInit:c,downCallback:n,getMescroll:m}=r.useMescroll(e.onPageScroll,e.onReachBottom),d=e.ref(null);e.onLoad((()=>{e.nextTick$1((()=>{d.value&&d.value.proactive()}))}));const p=e=>{i.value=!1;let r={page:e.num,limit:e.size,keyword:t.value,create_time:a.value};o.getVerifyRecords(r).then((r=>{let o=r.data.data;1==e.num&&(u.value=[]),u.value=u.value.concat(o),e.endSuccess(o.length),i.value=!0})).catch((()=>{i.value=!0,e.endErr()}))},v=()=>{m().resetUpScroll()},g=e.ref(),f=()=>{g.value.show=!0},j=e=>{a.value=e,u.value=[],m().resetUpScroll()};return(r,o)=>e.e({a:e.o((e=>v())),b:e.o((e=>v())),c:t.value,d:e.o((e=>t.value=e.detail.value)),e:t.value},t.value?{f:e.o((e=>t.value=""))}:{},{g:e.o(f),h:u.value.length},u.value.length?{i:e.f(u.value,((r,o,l)=>({a:e.t(r.code),b:e.o((o=>e.unref(s.copy)(r.code))),c:e.f(r.value.list,((o,t,a)=>e.e({a:"52092d55-1-"+l+"-"+a+",52092d55-0",b:e.p({width:"130rpx",height:"130rpx",radius:"var(--goods-rounded-big)",src:e.unref(s.img)(o.cover?o.cover:""),mode:"aspectFill"}),c:e.t(o.name)},r.sub_name?{d:e.t(r.sub_name)}:{},{e:e.t(o.verify_num),f:t}))),d:r.sub_name,e:e.t(r.create_time),f:e.t(r.member?r.member.nickname:"--"),g:e.o((e=>{return o=r,void s.redirect({url:"/app/pages/verify/detail",param:{code:o.code}});var o})),h:r.id}))),j:e.unref(s.img)("static/resource/images/diy/shop_default.jpg")}:{},{k:!u.value.length&&i.value},!u.value.length&&i.value?{l:e.p({option:{tip:"暂无核销记录"}})}:{},{m:e.sr("mescrollRef","52092d55-0"),n:e.o(e.unref(c)),o:e.o(p),p:e.p({top:"88rpx",down:{use:!1}}),q:e.sr(g,"52092d55-3",{k:"selectDateRef"}),r:e.o(j),s:e.s(r.themeColor())})}});u.__runtimeHooks=1;const i=e._export_sfc(u,[["__scopeId","data-v-52092d55"]]);tt.createPage(i);
