"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("./common/vendor.js"),i=require("./utils/interceptor.js"),t=require("./utils/common.js"),r=require("./stores/member.js"),o=require("./stores/config.js"),n=require("./stores/system.js"),s=require("./hooks/useLogin.js");require("./utils/request.js");const a=require("./locale/index.js"),u=require("./utils/storage.js"),p=require("./utils/mixin.js");require("./locale/i18n.js"),require("./locale/language.js"),require("./utils/pages.js"),require("./utils/auth.js"),require("./app/api/auth.js"),require("./hooks/useShare.js"),require("./app/api/diy.js"),require("./app/stores/diy.js"),require("./app/api/member.js"),require("./app/api/system.js"),Math;const c=e.defineComponent({__name:"App",setup:a=>(e.onLaunch((a=>{i.launchInterceptor();const u=e.index.getUpdateManager();u.onCheckForUpdate((function(e){})),u.onUpdateReady((function(i){e.index.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success(e){e.confirm&&u.applyUpdate()}})})),u.onUpdateFailed((function(e){})),n.useSystemStore().getInitFn((async()=>{const i=o.useConfigStore();let n=e.index.getStorageSync("login_config");n||(n=t.deepClone(i.login));let a=t.currRoute();if(t.setThemeColor(a),e.index.getStorageSync("member_lock")&&-1!=["app/pages/auth/index","app/pages/auth/login","app/pages/auth/register","app/pages/auth/resetpwd"].indexOf(a)&&(n.is_username||n.is_mobile||n.is_bind_mobile))return!1;if(t.getToken()){const i=r.useMemberStore();await i.setToken(t.getToken(),(()=>{e.index.getStorageSync("openid")||r.useMemberStore().info,e.index.getStorageSync("isBindMobile")&&e.index.removeStorageSync("isBindMobile")}))}if(!t.getToken()){if(e.index.getStorageSync("autoLoginLock"))return;s.useLogin().getAuthCode()}}))})),e.onShow((()=>{})),e.onHide((()=>{})),()=>{})});function g(){const i=e.createSSRApp(c);return i.use(e.createPinia()),i.use(a.locale),i.use(e.uviewPlus),i.use(p.mixin),u.uniStorage(),{app:i,Pinia:e.Pinia}}g().app.mount("#app"),exports.createApp=g;
