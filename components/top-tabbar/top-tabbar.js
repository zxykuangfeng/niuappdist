"use strict";const e=require("../../common/vendor.js"),t=require("../../utils/common.js"),r=require("../../stores/system.js"),o=require("../../app/stores/diy.js"),n=require("../../hooks/useLocation.js");require("../../utils/pages.js"),require("../../stores/member.js"),require("../../app/api/member.js"),require("../../utils/request.js"),require("../../locale/index.js"),require("../../locale/i18n.js"),require("../../locale/language.js"),require("../../app/api/auth.js"),require("../../stores/config.js"),require("../../app/api/system.js"),require("../../hooks/useLogin.js");const u=e.defineComponent({__name:"top-tabbar",props:{data:{type:Object,default:{}},titleColor:{type:String,default:"#606266"},customBack:{type:Function,default:null},scrollBool:{type:[String,Number],default:-1},isBack:{type:Boolean,default:!0},isFill:{type:Boolean,default:!0}},setup(u,{expose:s}){const l=u;let a=e.index.getSystemInfoSync().platform;const i=r.useSystemStore(),c=o.useDiyStore(),f=e.computed((()=>{let e=!0;return e=!I.value&&l.isFill,e})),p=e.computed((()=>l.data)),d=e.computed((()=>{if(l.data&&l.data.topStatusBar)return l.data.topStatusBar})),m=e.computed((()=>{let e="";return l.isBack?(e+="padding-left: 30rpx;","style-1"==d.value.style&&(e+="padding-right:80rpx;")):("style-1"==d.value.style&&(e+="padding-right: 30rpx;"),e+="padding-left: 30rpx;"),e+="height:"+i.menuButtonInfo.height+"px;",e+="padding-top:"+i.menuButtonInfo.top+"px;",e+="padding-bottom: 8px;",e})),g=e.computed((()=>{let e="";return e+="font-size: 32rpx;","ios"===a?e+="font-weight: 500;":"android"===a&&(e+="font-size: 36rpx;",e+="font-weight: 500;"),e+=`color: ${y.value};`,"style-1"==d.value.style&&(e+=`text-align: ${d.value.textAlign};`),e})),y=e.computed((()=>{let e="";return e=1==l.scrollBool?d.value.rollTextColor:d.value.textColor,e})),x=e.computed((()=>{let e="";return e=1==l.scrollBool?d.value.rollBgColor:d.value.bgColor,e}));let B=e.index.getStorageSync("componentsScrollValGroup");if(B)B.TopTabbar=0,e.index.setStorageSync("componentsScrollValGroup",B);else{let t={TopTabbar:0};e.index.setStorageSync("componentsScrollValGroup",t)}let h=getCurrentPages();const k=()=>{1===h.length?"app/pages/auth/index"===h[0].route?e.index.getStorage({key:"loginBack",success:e=>{e?t.redirect({...e.data,mode:"redirectTo"}):t.redirect({url:"/app/pages/index/index",mode:"switchTab"})},fail:e=>{t.redirect({url:"/app/pages/index/index",mode:"switchTab"})}}):"function"==typeof l.customBack?l.customBack():t.redirect({url:"/app/pages/index/index",mode:"switchTab"}):"function"==typeof l.customBack?l.customBack():e.index.navigateBack()},v=e.computed((()=>`calc(100vw - ${i.menuButtonInfo.right}px + ${i.menuButtonInfo.width}px + 10px)`)),S=e.ref(0),b=e.getCurrentInstance();let j=i.menuButtonInfo.height+i.menuButtonInfo.top+8;S.value=j||0;let q=!1;d.value&&"style-4"==d.value.style&&(q=!0);const C=n.useLocation(q);C.onLoad(),C.init();let I=e.ref(!1);e.onMounted((()=>{e.nextTick$1((()=>{e.index.createSelectorQuery().in(b).select(".ns-navbar-wrap .u-navbar .content-wrap").boundingClientRect((e=>{S.value=e?e.height:0,c.$patch((e=>{e.topTabarHeight=S.value}))})).exec()})),C.refresh(),I.value=e.index.getStorageSync("imageAdsSameScreen")||!1}));return s({refresh:()=>{C.refresh()}}),(r,o)=>e.e({a:"decorate"!=e.unref(c).mode&&e.unref(d)},"decorate"!=e.unref(c).mode&&e.unref(d)?e.e({b:"style-1"==e.unref(d).style},"style-1"==e.unref(d).style?e.e({c:u.isBack},u.isBack?{d:e.unref(y),e:e.o(k)}:{},{f:e.t(e.unref(p).title),g:e.s(e.unref(g)),h:e.n(e.unref(d).textAlign),i:e.s(e.unref(m))}):{},{j:"style-2"==e.unref(d).style},"style-2"==e.unref(d).style?e.e({k:u.isBack},u.isBack?{l:e.unref(y),m:e.o(k)}:{},{n:e.unref(t.img)(e.unref(d).imgUrl),o:e.t(e.unref(p).title),p:e.unref(d).textColor,q:e.unref(d).textColor,r:e.s(e.unref(m)),s:e.o((t=>e.unref(c).toRedirect(e.unref(d).link)))}):{},{t:"style-3"==e.unref(d).style},"style-3"==e.unref(d).style?e.e({v:u.isBack},u.isBack?{w:e.unref(y),x:e.o(k)}:{},{y:e.unref(t.img)(e.unref(d).imgUrl),z:e.o((t=>e.unref(c).toRedirect(e.unref(d).link))),A:e.t(e.unref(d).inputPlaceholder),B:e.o((t=>e.unref(c).toRedirect(e.unref(d).link))),C:e.unref(i).menuButtonInfo.height-2+"px",D:e.unref(i).menuButtonInfo.height-2+"px",E:e.unref(v),F:e.s(e.unref(m))}):{},{G:"style-4"==e.unref(d).style},"style-4"==e.unref(d).style?e.e({H:u.isBack},u.isBack?{I:e.unref(y),J:e.o(k)}:{},{K:e.unref(d).textColor,L:e.unref(i).diyAddressInfo},e.unref(i).diyAddressInfo?{M:e.t(e.unref(i).diyAddressInfo.community),N:e.o((t=>e.unref(C).reposition())),O:e.unref(d).textColor}:{P:e.t(e.unref(i).defaultPositionAddress),Q:e.o((t=>e.unref(C).reposition())),R:e.unref(d).textColor},{S:e.o((t=>e.unref(C).reposition())),T:e.unref(d).textColor,U:e.s(e.unref(m))}):{},{V:S.value+"px",W:-1!=l.scrollBool?1:"",X:-1==l.scrollBool?1:"",Y:e.unref(x),Z:e.unref(f)},e.unref(f)?{aa:S.value+"px"}:{},{ab:e.n(e.unref(d).style)}):{})}}),s=e._export_sfc(u,[["__scopeId","data-v-5c2ec9e1"]]);tt.createComponent(s);
