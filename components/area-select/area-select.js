"use strict";const e=require("../../common/vendor.js"),t=require("../../app/api/system.js");if(require("../../utils/request.js"),require("../../stores/member.js"),require("../../utils/common.js"),require("../../utils/pages.js"),require("../../app/stores/diy.js"),require("../../hooks/useLogin.js"),require("../../stores/config.js"),require("../../app/api/auth.js"),require("../../stores/system.js"),require("../../app/api/member.js"),require("../../locale/index.js"),require("../../locale/i18n.js"),require("../../locale/language.js"),!Array){e.resolveComponent("u-popup")()}Math;const i=e.defineComponent({__name:"area-select",props:{areaId:{type:Number,default:0}},emits:["complete"],setup(i,{expose:r,emit:c}){const s=i,n=e.ref(!1),a=e.reactive({province:[],city:[],district:[]}),o=e.ref("province"),l=e.reactive({province:null,city:null,district:null});t.getAreaListByPid(0).then((({data:e})=>{a.province=e})).catch(),e.watch((()=>s.areaId),((e,i)=>{e&&!i&&t.getAreaByCode(e).then((({data:e})=>{e.province&&(l.province=e.province),e.city&&(l.city=e.city),e.district&&(l.district=e.district)}))}),{immediate:!0}),e.watch((()=>l.province),(()=>{t.getAreaListByPid(l.province.id).then((({data:e})=>{if(a.city=e,o.value="city",l.city){let t=!1;for(let i=0;i<e.length;i++)if(l.city.id==e[i].id){t=!0;break}t||(l.city=null)}})).catch()}),{deep:!0}),e.watch((()=>l.city),(e=>{e?t.getAreaListByPid(l.city.id).then((({data:e})=>{if(a.district=e,o.value="district",l.district){let t=!1;for(let i=0;i<e.length;i++)if(l.district.id==e[i].id){t=!0;break}t||(l.district=null)}e.length||(c("complete",l),n.value=!1)})).catch():(a.district=[],l.district=null)}),{deep:!0}),e.watch((()=>l.district),(e=>{e&&(o.value="district",c("complete",l),n.value=!1)}),{deep:!0});return r({open:()=>{n.value=!0}}),(t,i)=>e.e({a:a.province.length},a.province.length?e.e({b:l.province},l.province?{c:e.t(l.province.name)}:{},{d:"province"==o.value?1:"",e:e.o((e=>o.value="province"))}):{},{f:a.city.length},a.city.length?e.e({g:l.city},l.city?{h:e.t(l.city.name)}:{},{i:"city"==o.value?1:"",j:e.o((e=>o.value="city"))}):{},{k:a.district.length},a.district.length?e.e({l:l.district},l.district?{m:e.t(l.district.name)}:{},{n:"district"==o.value?1:"",o:e.o((e=>o.value="district"))}):{},{p:a.province.length},a.province.length?{q:e.f(a.province,((t,i,r)=>({a:e.t(t.name),b:l.province&&l.province.id==t.id?1:"",c:e.o((e=>l.province=t))}))),r:"province"==o.value}:{},{s:a.city.length},a.city.length?{t:e.f(a.city,((t,i,r)=>({a:e.t(t.name),b:l.city&&l.city.id==t.id?1:"",c:e.o((e=>l.city=t))}))),v:"city"==o.value}:{},{w:a.district.length},a.district.length?{x:e.f(a.district,((t,i,r)=>({a:e.t(t.name),b:l.district&&l.district.id==t.id?1:"",c:e.o((e=>l.district=t))}))),y:"district"==o.value}:{},{z:e.o((()=>{})),A:e.o((e=>n.value=!1)),B:e.p({show:n.value,mode:"bottom",round:10})})}});tt.createComponent(i);
