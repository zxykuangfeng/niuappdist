"use strict";const e=require("../../common/vendor.js"),t=require("../../utils/common.js"),r=require("../../stores/config.js");if(require("../../stores/system.js"),require("../../utils/pages.js"),require("../../app/stores/diy.js"),require("../../hooks/useLogin.js"),require("../../utils/request.js"),require("../../stores/member.js"),require("../../app/api/member.js"),require("../../app/api/auth.js"),require("../../locale/index.js"),require("../../locale/i18n.js"),require("../../locale/language.js"),require("../../app/api/system.js"),!Array){(e.resolveComponent("u-tabbar-item")+e.resolveComponent("u-tabbar"))()}Math||((()=>"../../node-modules/uview-plus/components/u-tabbar-item/u-tabbar-item.js")+(()=>"../../node-modules/uview-plus/components/u-tabbar/u-tabbar.js"))();const o=e.defineComponent({__name:"tabbar",props:{addon:{type:String,default:""},color:{type:Object,default:()=>({backgroundColor:"",textColor:"",textHoverColor:""})},border:{type:Boolean,default:!0}},setup(o){const a=o;let n=a.addon;const l=r.useConfigStore();!n&&l.addon&&(n=l.addon);const u=e.reactive({}),i=e.computed((()=>"/app/pages/index/tabbar"!=t.currRoute())),c=()=>{let t=e.cloneDeep(r.useConfigStore().tabbarList);if(1==t.length)Object.assign(u,t[0]);else{let e=!1;for(let r=0;r<t.length;r++)if(t[r].key==n){Object.assign(u,t[r]),e=!0;break}if(!e){let e=0,r={};try{t&&t.forEach((t=>{"app"==t.info.type&&(e++,r=t)})),1==e&&Object.assign(u,r)}catch(o){}}}if(a.color)for(let e in a.color)a.color[e]&&u.value[e]&&(u.value[e]=a.color[e])};c(),e.watch((()=>a.addon),((e,t)=>{e&&t&&e!=t&&c()}),{immediate:!0}),e.watch((()=>a.color),((e,t)=>{e&&t&&e!=t&&c()}),{immediate:!0,deep:!0}),a.addon||e.watch((()=>r.useConfigStore().tabbarList),((e,t)=>{e&&c()}),{deep:!0,immediate:!0});const s=e.computed((()=>{let e=t.currShareRoute().params,r=[];for(let t in e)r.push(t+"="+e[t]);return"/"+t.currRoute()+(r.length>0?"?"+r.join("&"):"")})),d=e=>{if(-1!=e.indexOf("http")||-1!=e.indexOf("http"))t.redirect({url:"/app/pages/webview/index",param:{src:encodeURIComponent(e)}});else{let r=t.currShareRoute().params,o=[];for(let e in r)o.push(e+"="+r[e]);if(e=="/"+t.currRoute()&&!o.length)return;t.redirect({url:e,mode:"reLaunch"})}},p=e.getCurrentInstance();return e.nextTick$1((()=>{e.index.createSelectorQuery().in(p).select(".tab-bar-placeholder").boundingClientRect((t=>{let r={height:t?t.height:0};e.index.setStorageSync("tabbarInfo",r)})).exec()})),(r,o)=>e.e({a:e.unref(i)&&u&&Object.keys(u).length},e.unref(i)&&u&&Object.keys(u).length?{b:e.f(u.value.list,((r,o,a)=>e.e(1==u.value.type?{a:e.o((e=>d(r.link.url))),b:"c7a6db86-1-"+a+",c7a6db86-0",c:e.p({"custom-style":{"background-color":u.value.backgroundColor},text:r.text,icon:e.unref(t.img)(e.unref(s)==r.link.url?r.iconSelectPath:r.iconPath),name:r.link.url})}:{},2==u.value.type?{d:e.o((e=>d(r.link.url))),e:"c7a6db86-2-"+a+",c7a6db86-0",f:e.p({"custom-style":{"background-color":u.value.backgroundColor},icon:e.unref(t.img)(e.unref(s)==r.link.url?r.iconSelectPath:r.iconPath),name:r.link.url})}:{},3==u.value.type?{g:e.o((e=>d(r.link.url))),h:"c7a6db86-3-"+a+",c7a6db86-0",i:e.p({"custom-style":{"background-color":u.value.backgroundColor},text:r.text,name:r.link.url})}:{}))),c:1==u.value.type,d:2==u.value.type,e:3==u.value.type,f:e.p({value:e.unref(s),zIndex:"9999",fixed:!0,placeholder:!0,safeAreaInsetBottom:!0,"inactive-color":u.value.textColor,"active-color":u.value.textHoverColor,border:a.border})}:{})}}),a=e._export_sfc(o,[["__scopeId","data-v-c7a6db86"]]);tt.createComponent(a);
