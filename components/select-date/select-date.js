"use strict";const e=require("../../common/vendor.js");if(!Array){e.resolveComponent("u-popup")()}Math;const t=e.defineComponent({__name:"select-date",emits:["confirm"],setup(t,{expose:a,emit:n}){const o=e.ref(!1),r=e.ref([]),l=()=>{const e=new Date,t=[],a=[],n=[],o=e.getFullYear(),r=e.getMonth(),l=e.getDate();for(let s=1990;s<=e.getFullYear()+2;s++)t.push(s);for(let s=1;s<=12;s++)a.push(s);let u=s(o,r+1);for(let s=1;s<=u;s++)n.push(s);let i=[t.indexOf(o),r,l-1],d=`${o}-${r+1<10?"0"+(r+1):r+1}-${l<10?"0"+l:l}`,m=`${o}-${r+1<10?"0"+(r+1):r+1}-${l<10?"0"+l:l} 00:00:00`,D=`${o}-${r+1<10?"0"+(r+1):r+1}-${l<10?"0"+l:l} 23:59:59`,p=new Date(e.getFullYear(),r-1,e.getDate()),v=new Date(e.getFullYear(),r-3,e.getDate()),c=new Date(e.getFullYear(),r-6,e.getDate()),w=new Date(e.getFullYear()-1,r,e.getDate());const f=e=>{const t=e.getFullYear(),a=e.getMonth()+1,n=e.getDate();return`${t}-${a<10?"0"+a:a}-${n<10?"0"+n:n} 00:00:00`};return{years:t,months:a,days:n,curIndex:i,nowDate:d,nowDateStart:m,nowDateEnd:D,lastMonth:f(p),lastThreeMonth:f(v),halfYear:f(c),lastYear:f(w)}},s=(e,t)=>new Date(e,t,0).getDate(),u=e.reactive({years:l().years,months:l().months,days:l().days,curIndex:l().curIndex,nowDate:[l().nowDateStart,l().nowDateEnd]}),i=e=>{const t=e.detail.value;let a=u.years[t[0]],n=u.months[t[1]],o=u.days[t[2]];u.days=((e,t)=>{let a=s(e,t),n=[];for(let o=1;o<=a;o++)n.push(o);return n})(a,n),"first"==m.value.type?u.nowDate[0]=`${a}-${n<10?"0"+n:n}-${o<10?"0"+o:o} 00:00:00`:"second"==m.value.type&&(u.nowDate[1]=`${a}-${n<10?"0"+n:n}-${o<10?"0"+o:o} 23:59:59`)},d=e.reactive([{time:[l().lastMonth,l().nowDateEnd],type:"lastMonth",name:"近1个月"},{time:[l().lastThreeMonth,l().nowDateEnd],type:"lastThreeMonth",name:"近3个月"},{time:[l().halfYear,l().nowDateEnd],type:"halfYear",name:"近半年"},{time:[l().lastYear,l().nowDateEnd],type:"lastYear",name:"近一年"}]),m=e.ref({type:"first",time:[]}),D=()=>{if("first"==m.value.type||"second"==m.value.type){if(r.value=u.nowDate,new Date(r.value[0]).getTime()>new Date(r.value[1]).getTime())return void e.index.showToast({title:"开始时间不能大于结束时间",icon:"none"})}else r.value=m.value.time;n("confirm",r.value),o.value=!1},p=()=>{m.value.type="first",u.curIndex=l().curIndex,u.nowDate=[l().nowDateStart,l().nowDateEnd]},v=()=>{n("confirm",[]),o.value=!1};return a({show:o}),(t,a)=>({a:e.o(v),b:e.f(d,((t,a,n)=>({a:e.t(t.name),b:"a"+a,c:m.value.type==t.type?1:"",d:e.o((e=>{return a=t,m.value.type=a.type,m.value.time=a.time,u.nowDate[0]=m.value.time[0],void(u.nowDate[1]=m.value.time[1]);var a}))}))),c:e.t(u.nowDate[0].substr(0,10)),d:"first"==m.value.type?1:"",e:e.o((e=>m.value.type="first")),f:e.t(u.nowDate[1].substr(0,10)),g:"second"==m.value.type?1:"",h:e.o((e=>m.value.type="second")),i:e.f(u.years,((t,a,n)=>({a:e.t(t),b:a}))),j:e.f(u.months,((t,a,n)=>({a:e.t(t),b:a}))),k:e.f(u.days,((t,a,n)=>({a:e.t(t),b:a}))),l:u.curIndex,m:e.o(i),n:e.o(p),o:e.o(D),p:e.o((e=>o.value=!1)),q:e.p({show:o.value,mode:"bottom",round:10,zIndex:"10090"})})}}),a=e._export_sfc(t,[["__scopeId","data-v-ab0b5645"]]);tt.createComponent(a);
