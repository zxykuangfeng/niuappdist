"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../locale/index.js"),n=require("../../../../utils/common.js"),o=require("../../api/order.js"),t=require("../../utils/map/openMap.js"),u=require("../../utils/common.js");if(require("../../../../locale/i18n.js"),require("../../../../locale/language.js"),require("../../../../utils/pages.js"),require("../../../../stores/system.js"),require("../../../../app/api/system.js"),require("../../../../utils/request.js"),require("../../../../stores/member.js"),require("../../../../app/api/member.js"),require("../../../../app/api/auth.js"),require("../../../../stores/config.js"),require("../../../../app/stores/diy.js"),require("../../../../hooks/useLogin.js"),require("../../utils/map/transformCoordinate.js"),!Array){(e.resolveComponent("pay")+e.resolveComponent("u-loading-page"))()}const a=()=>"../../../../node-modules/uview-plus/components/u-loading-page/u-loading-page.js";Math||((()=>"../../../../components/pay/pay.js")+e.unref(s)+a)();const s=()=>"./components/select-coupon/select-coupon.js",i=e.defineComponent({__name:"detail",setup(a){let s=e.ref({}),i=e.ref(!0);e.ref("");let d=e.ref("");const f=e.ref();e.onLoad((e=>{d.value=e.order_id,p(d.value)}));const p=e=>{i.value=!0,o.getOrderDetail(e).then((e=>{s.value=e.data,i.value=!1})).catch((()=>{i.value=!1}))};e.computed((()=>{var e;return(null==(e=f.value)?void 0:e.couponList)||[]}));const l=e.ref(null),c=(r="")=>{var t;"pay"==r?o.orderPay(s.value.order_id).then((()=>{var e;null==(e=l.value)||e.open(s.value.order_type,s.value.order_id,`/addon/zzhc/pages/order/detail?order_id=${s.value.order_id}`)})):"cancel"==r?(t=s.value,e.index.showModal({title:"提示",content:"您确定要取消该订单吗？",success:e=>{e.confirm&&o.orderCancel(t.order_id).then((()=>{p(t.order_id)}))}})):"index"==r&&n.redirect({url:"/addon/zzhc/pages/index"})},m=e=>{if(console.log(e),null!=e){let r={order_id:s.value.order_id,coupon_member_id:e.id};o.orderUseCoupon(r).then((()=>{p(s.value.order_id)}))}};return(o,a)=>e.e({a:!e.unref(i)},e.unref(i)?{}:e.e({b:e.unref(s).status_name},e.unref(s).status_name?e.e({c:1==e.unref(s).status},1==e.unref(s).status?{d:e.unref(n.img)("addon/zzhc/wait_service.png")}:{},{e:2==e.unref(s).status},2==e.unref(s).status?{f:e.unref(n.img)("addon/zzhc/in_service.png")}:{},{g:3==e.unref(s).status},3==e.unref(s).status?{h:e.unref(n.img)("addon/zzhc/wait_pay.png")}:{},{i:5==e.unref(s).status},5==e.unref(s).status?{j:e.unref(n.img)("addon/zzhc/finish.png")}:{},{k:-1==e.unref(s).status},-1==e.unref(s).status?{l:e.unref(n.img)("addon/zzhc/cancel.png")}:{},{m:e.t(e.unref(s).status_name.name)}):{},{n:1==e.unref(s).status},1==e.unref(s).status?{o:e.t(e.unref(s).wait_people),p:e.t(e.unref(s).wait_duration),q:e.t(e.unref(s).mobile.substr(e.unref(s).mobile.length-4))}:{},{r:e.t(e.unref(s).store.store_name),s:e.unref(n.img)("/addon/zzhc/dh.png"),t:e.o((r=>e.unref(t.openMap).openMap(e.unref(s).store.latitude,e.unref(s).store.longitude,e.unref(s).store.full_address))),v:e.unref(n.img)("/addon/zzhc/phone.png"),w:e.o((r=>e.unref(u.callPhone)(e.unref(s).store.store_mobile))),x:e.unref(n.img)(e.unref(s).goods_image),y:e.t(e.unref(s).goods_name),z:e.t(e.unref(s).duration),A:e.unref(n.img)(e.unref(s).staff_headimg),B:e.t(e.unref(s).staff_name),C:e.s(1!=e.unref(s).status?"margin-top: -70rpx":"margin-top: 30rpx"),D:e.t(e.unref(r.t)("orderNo")),E:e.t(e.unref(s).order_no),F:e.unref(s).out_trade_no},e.unref(s).out_trade_no?{G:e.t(e.unref(r.t)("orderTradeNo")),H:e.t(e.unref(s).out_trade_no)}:{},{I:e.t(e.unref(r.t)("createTime")),J:e.t(e.unref(s).create_time),K:e.unref(s).pay},e.unref(s).pay?{L:e.t(e.unref(r.t)("payTypeName")),M:e.t(e.unref(s).pay.type_name)}:{},{N:e.unref(s).pay},e.unref(s).pay?{O:e.t(e.unref(r.t)("payTime")),P:e.t(e.unref(s).pay.pay_time)}:{},{Q:0==e.unref(s).coupon_member_id&&3==e.unref(s).status},0==e.unref(s).coupon_member_id&&3==e.unref(s).status?{R:e.o((e=>f.value.open()))}:{},{S:e.t(e.unref(r.t)("goodsMoney")),T:e.t(e.unref(s).goods_money),U:e.t(e.unref(r.t)("goodsVipMoney")),V:e.t(e.unref(s).goods_vip_money),W:e.t(e.unref(r.t)("discountMoney")),X:e.t(e.unref(s).discount_money),Y:e.t(e.unref(r.t)("orderMoney")),Z:e.t(e.unref(s).order_money),aa:e.t(e.unref(r.t)("index")),ab:e.o((e=>c("index"))),ac:1==e.unref(s).status},1==e.unref(s).status?{ad:e.t(e.unref(r.t)("orderCancel")),ae:e.o((e=>c("cancel")))}:{},{af:3==e.unref(s).status},3==e.unref(s).status?{ag:e.t(e.unref(r.t)("topay")),ah:e.o((e=>c("pay")))}:{}),{ai:e.sr(l,"64c29304-0",{k:"payRef"}),aj:e.o(o.payClose),ak:e.sr(f,"64c29304-1",{k:"couponRef"}),al:e.o(m),am:e.p({"order-id":e.unref(s).order_id}),an:e.p({"bg-color":"var(--page-bg-color)",loading:e.unref(i),fontSize:"16",color:"var(--primary-color-dark)"}),ao:e.s(o.themeColor())})}});tt.createPage(i);
