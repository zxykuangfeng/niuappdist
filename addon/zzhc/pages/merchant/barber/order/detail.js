"use strict";const e=require("../../../../../../common/vendor.js");require("../../../../../../locale/i18n.js"),require("../../../../../../stores/system.js");const r=require("../../../../../../utils/common.js"),n=require("../../../../api/merchant.js"),t=require("../../../../utils/common.js");if(require("../../../../../../locale/language.js"),require("../../../../../../utils/pages.js"),require("../../../../../../app/api/system.js"),require("../../../../../../utils/request.js"),require("../../../../../../stores/member.js"),require("../../../../../../app/api/member.js"),require("../../../../../../app/api/auth.js"),require("../../../../../../stores/config.js"),require("../../../../../../app/stores/diy.js"),require("../../../../../../hooks/useLogin.js"),require("../../../../../../locale/index.js"),!Array){(e.resolveComponent("u-avatar")+e.resolveComponent("u-icon")+e.resolveComponent("u-loading-page"))()}Math||((()=>"../../../../../../node-modules/uview-plus/components/u-avatar/u-avatar.js")+(()=>"../../../../../../node-modules/uview-plus/components/u-icon/u-icon.js")+(()=>"../../../../../../node-modules/uview-plus/components/u-loading-page/u-loading-page.js"))();const u=e.defineComponent({__name:"detail",setup(u){let o=e.ref({}),a=e.ref(!0);e.ref("");let s=e.ref("");e.onLoad((e=>{s.value=e.order_id,i()}));const i=()=>{a.value=!0;let e={order_id:s.value,store_id:t.currStoreId()};n.getBarberOrderDetail(e).then((e=>{o.value=e.data,a.value=!1})).catch((()=>{a.value=!1}))},d=(u="")=>{var a;"back"==u?r.redirect({url:"/addon/zzhc/pages/merchant/barber/order/list"}):"cancel"==u?(a=o.value,e.index.showModal({title:"提示",content:"您确定要取消该订单吗？",success:e=>{if(e.confirm){let e={order_id:a.order_id,store_id:t.currStoreId()};n.barberOrderCancel(e).then((()=>{i(e.order_id)}))}}})):"service"==u?(e=>{let r={order_id:e.order_id,store_id:t.currStoreId()};n.barberOrderService(r).then((r=>{i(e.order_id)}))})(o.value):"revert"==u?(r=>{e.index.showModal({title:"提示",content:"您确定将该订单退回排队吗？",success:e=>{if(e.confirm){let e={order_id:r.order_id,store_id:t.currStoreId()};n.barberOrderRevert(e).then((e=>{i(r.order_id)}))}}})})(o.value):"finish"==u&&(r=>{e.index.showModal({title:"提示",content:"您确定已完成服务吗？",success:e=>{if(e.confirm){let e={order_id:r.order_id,store_id:t.currStoreId()};n.barberOrderFinish(e).then((e=>{i(r.order_id)}))}}})})(o.value)};return(n,u)=>e.e({a:!e.unref(a)},e.unref(a)?{}:e.e({b:e.unref(o).status_name},e.unref(o).status_name?e.e({c:1==e.unref(o).status},1==e.unref(o).status?{d:e.unref(r.img)("addon/zzhc/wait_service.png")}:{},{e:2==e.unref(o).status},2==e.unref(o).status?{f:e.unref(r.img)("addon/zzhc/in_service.png")}:{},{g:3==e.unref(o).status},3==e.unref(o).status?{h:e.unref(r.img)("addon/zzhc/wait_pay.png")}:{},{i:5==e.unref(o).status},5==e.unref(o).status?{j:e.unref(r.img)("addon/zzhc/finish.png")}:{},{k:-1==e.unref(o).status},-1==e.unref(o).status?{l:e.unref(r.img)("addon/zzhc/cancel.png")}:{},{m:e.t(e.unref(o).status_name.name)}):{},{n:1==e.unref(o).status},1==e.unref(o).status?{o:e.t(e.unref(o).wait_people),p:e.t(e.unref(o).wait_duration),q:e.t(e.unref(o).mobile.substr(e.unref(o).mobile.length-4))}:{},{r:e.unref(r.img)(e.unref(o).goods_image),s:e.t(e.unref(o).goods_name),t:e.t(e.unref(o).duration),v:e.p({src:e.unref(r.img)(e.unref(o).member.headimg),size:"32",leftIcon:"none","default-url":e.unref(r.img)("static/resource/images/default_headimg.png")}),w:e.t(e.unref(o).member.nickname),x:e.p({name:"phone-fill",color:"var(--primary-color)",size:"28"}),y:e.o((r=>e.unref(t.callPhone)(e.unref(o).member.phone))),z:e.s(1!=e.unref(o).status?"margin-top: -70rpx":"margin-top: 30rpx"),A:e.t(e.unref(o).order_no),B:e.unref(o).out_trade_no},e.unref(o).out_trade_no?{C:e.t(e.unref(o).out_trade_no)}:{},{D:e.t(e.unref(o).create_time),E:e.unref(o).pay},e.unref(o).pay?{F:e.t(e.unref(o).pay.type_name)}:{},{G:e.unref(o).pay},e.unref(o).pay?{H:e.t(e.unref(o).pay.pay_time)}:{},{I:e.t(e.unref(o).goods_money),J:e.t(e.unref(o).goods_vip_money),K:e.unref(o).pay},e.unref(o).pay?{L:e.t(e.unref(o).discount_money)}:{},{M:e.unref(o).pay},e.unref(o).pay?{N:e.t(e.unref(o).order_money)}:{},{O:e.p({name:"arrow-left",label:"返回",labelPos:"right",color:"#999",size:"20"}),P:e.o((e=>d("back"))),Q:1==e.unref(o).status},1==e.unref(o).status?{R:e.o((e=>d("cancel")))}:{},{S:1==e.unref(o).status},1==e.unref(o).status?{T:e.o((e=>d("service")))}:{},{U:2==e.unref(o).status},2==e.unref(o).status?{V:e.o((e=>d("revert")))}:{},{W:2==e.unref(o).status},2==e.unref(o).status?{X:e.o((e=>d("finish")))}:{}),{Y:e.p({"bg-color":"var(--page-bg-color)",loading:e.unref(a),fontSize:"16",color:"var(--primary-color-dark)"}),Z:e.s(n.themeColor())})}});tt.createPage(u);
