"use strict";const e=require("../../../../../../common/vendor.js");require("../../../../../../locale/i18n.js"),require("../../../../../../stores/system.js");const r=require("../../../../../../utils/common.js"),n=require("../../../../api/merchant.js"),t=require("../../../../utils/common.js");if(require("../../../../../../locale/language.js"),require("../../../../../../utils/pages.js"),require("../../../../../../app/api/system.js"),require("../../../../../../utils/request.js"),require("../../../../../../stores/member.js"),require("../../../../../../app/api/member.js"),require("../../../../../../app/api/auth.js"),require("../../../../../../stores/config.js"),require("../../../../../../app/stores/diy.js"),require("../../../../../../hooks/useLogin.js"),require("../../../../../../locale/index.js"),!Array){(e.resolveComponent("u-avatar")+e.resolveComponent("u-icon")+e.resolveComponent("u-loading-page"))()}Math||((()=>"../../../../../../node-modules/uview-plus/components/u-avatar/u-avatar.js")+(()=>"../../../../../../node-modules/uview-plus/components/u-icon/u-icon.js")+(()=>"../../../../../../node-modules/uview-plus/components/u-loading-page/u-loading-page.js"))();const a=e.defineComponent({__name:"detail",setup(a){let u=e.ref({}),o=e.ref(!0);e.ref("");let s=e.ref("");e.onLoad((e=>{s.value=e.order_id,i()}));const i=()=>{o.value=!0;let e={order_id:s.value,store_id:t.currStoreId()};n.getManageOrderDetail(e).then((e=>{u.value=e.data,o.value=!1})).catch((()=>{o.value=!1}))},d=(a="")=>{var o;"back"==a?r.redirect({url:"/addon/zzhc/pages/merchant/manage/order/list"}):"cancel"==a?(o=u.value,e.index.showModal({title:"提示",content:"您确定要取消该订单吗？",success:e=>{if(e.confirm){let e={order_id:o.order_id,store_id:t.currStoreId()};n.manageOrderCancel(e).then((()=>{i(e.order_id)}))}}})):"service"==a?(e=>{let r={order_id:e.order_id,store_id:t.currStoreId()};manageOrderService(r).then((r=>{i(e.order_id)}))})(u.value):"revert"==a?(r=>{e.index.showModal({title:"提示",content:"您确定将该订单退回排队吗？",success:e=>{if(e.confirm){let e={order_id:r.order_id,store_id:t.currStoreId()};manageOrderRevert(e).then((e=>{i(r.order_id)}))}}})})(u.value):"finish"==a&&(r=>{e.index.showModal({title:"提示",content:"您确定已完成服务吗？",success:e=>{if(e.confirm){let e={order_id:r.order_id,store_id:t.currStoreId()};manageOrderFinish(e).then((e=>{i(r.order_id)}))}}})})(u.value)};return(n,a)=>e.e({a:!e.unref(o)},e.unref(o)?{}:e.e({b:e.unref(u).status_name},e.unref(u).status_name?e.e({c:1==e.unref(u).status},1==e.unref(u).status?{d:e.unref(r.img)("addon/zzhc/wait_service.png")}:{},{e:2==e.unref(u).status},2==e.unref(u).status?{f:e.unref(r.img)("addon/zzhc/in_service.png")}:{},{g:3==e.unref(u).status},3==e.unref(u).status?{h:e.unref(r.img)("addon/zzhc/wait_pay.png")}:{},{i:5==e.unref(u).status},5==e.unref(u).status?{j:e.unref(r.img)("addon/zzhc/finish.png")}:{},{k:-1==e.unref(u).status},-1==e.unref(u).status?{l:e.unref(r.img)("addon/zzhc/cancel.png")}:{},{m:e.t(e.unref(u).status_name.name)}):{},{n:1==e.unref(u).status},1==e.unref(u).status?{o:e.t(e.unref(u).wait_people),p:e.t(e.unref(u).wait_duration),q:e.t(e.unref(u).mobile.substr(e.unref(u).mobile.length-4))}:{},{r:e.unref(r.img)(e.unref(u).staff_headimg),s:e.t(e.unref(u).goods_name),t:e.t(e.unref(u).staff_name),v:e.t(e.unref(u).duration),w:e.p({src:e.unref(r.img)(e.unref(u).member.headimg),size:"32",leftIcon:"none","default-url":e.unref(r.img)("static/resource/images/default_headimg.png")}),x:e.t(e.unref(u).member.nickname),y:e.p({name:"phone-fill",color:"var(--primary-color)",size:"28"}),z:e.o((r=>e.unref(t.callPhone)(e.unref(u).member.phone))),A:e.s(1!=e.unref(u).status?"margin-top: -70rpx":"margin-top: 30rpx"),B:e.t(e.unref(u).order_no),C:e.unref(u).out_trade_no},e.unref(u).out_trade_no?{D:e.t(e.unref(u).out_trade_no)}:{},{E:e.t(e.unref(u).create_time),F:e.unref(u).pay},e.unref(u).pay?{G:e.t(e.unref(u).pay.type_name)}:{},{H:e.unref(u).pay},e.unref(u).pay?{I:e.t(e.unref(u).pay.pay_time)}:{},{J:e.t(e.unref(u).goods_money),K:e.t(e.unref(u).goods_vip_money),L:e.unref(u).pay},e.unref(u).pay?{M:e.t(e.unref(u).discount_money)}:{},{N:e.unref(u).pay},e.unref(u).pay?{O:e.t(e.unref(u).order_money)}:{},{P:e.p({name:"arrow-left",label:"返回",labelPos:"right",color:"#999",size:"20"}),Q:e.o((e=>d("back"))),R:1==e.unref(u).status},1==e.unref(u).status?{S:e.o((e=>d("cancel")))}:{}),{T:e.p({"bg-color":"var(--page-bg-color)",loading:e.unref(o),fontSize:"16",color:"var(--primary-color-dark)"}),U:e.s(n.themeColor())})}});tt.createPage(a);
