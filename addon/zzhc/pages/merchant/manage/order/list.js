"use strict";const e=require("../../../../../../common/vendor.js");require("../../../../../../locale/i18n.js"),require("../../../../../../stores/system.js");const r=require("../../../../../../utils/common.js"),s=require("../../../../api/order.js"),t=require("../../../../api/merchant.js"),o=require("../../../../../../components/mescroll/hooks/useMescroll.js"),a=require("../../../../utils/common.js");if(require("../../../../../../locale/language.js"),require("../../../../../../utils/pages.js"),require("../../../../../../app/api/system.js"),require("../../../../../../utils/request.js"),require("../../../../../../stores/member.js"),require("../../../../../../app/api/member.js"),require("../../../../../../app/api/auth.js"),require("../../../../../../stores/config.js"),require("../../../../../../app/stores/diy.js"),require("../../../../../../hooks/useLogin.js"),require("../../../../../../locale/index.js"),!Array){(e.resolveComponent("u-avatar")+e.resolveComponent("u-icon"))()}Math||((()=>"../../../../../../node-modules/uview-plus/components/u-avatar/u-avatar.js")+(()=>"../../../../../../node-modules/uview-plus/components/u-icon/u-icon.js")+u+n)();const n=()=>"../../../../../../components/mescroll/mescroll-body/mescroll-body.js",u=()=>"../../../../../../components/mescroll/mescroll-empty/mescroll-empty.js",l=e.defineComponent({__name:"list",setup(n){const{mescrollInit:u,downCallback:l,getMescroll:i}=o.useMescroll(e.onPageScroll,e.onReachBottom);let c=e.ref([]),m=e.ref(!1),d=e.ref(!1),p=e.ref(""),f=e.ref([]);e.onLoad((e=>{p.value=e.status||"",v()}));const g=e=>{m.value=!1;let r={page:e.num,limit:e.size,store_id:a.currStoreId(),status:p.value};t.getManageOrderList(r).then((r=>{let s=r.data.data;1==e.num&&(c.value=[]),c.value=c.value.concat(s),e.endSuccess(s.length),m.value=!0})).catch((()=>{m.value=!0,e.endErr()}))},v=()=>{d.value=!1,f.value=[];f.value.push({name:"全部",status:""}),s.getOrderStatus().then((e=>{Object.values(e.data).forEach(((e,r)=>{f.value.push(e)})),d.value=!0})).catch((()=>{d.value=!0}))},h=e=>{r.redirect({url:"/addon/zzhc/pages/merchant/manage/order/detail",param:{order_id:e.order_id}})},j=(r,s="")=>{var o;"cancel"==s&&(o=r,e.index.showModal({title:"提示",content:"您确定要取消该订单吗？",success:e=>{if(e.confirm){let e={order_id:o.order_id,store_id:a.currStoreId()};t.manageOrderCancel(e).then((e=>{i().resetUpScroll()}))}}}))};return(s,t)=>e.e({a:e.unref(d)},e.unref(d)?{b:e.f(e.unref(f),((r,s,t)=>({a:e.t(r.name),b:e.n({"class-select":e.unref(p)==r.status}),c:e.o((e=>{return s=r.status,p.value=s,c.value=[],void i().resetUpScroll();var s}))})))}:{},{c:e.f(e.unref(c),((s,t,o)=>e.e({a:1==s.status},1==s.status?{b:e.t(s.wait_people),c:e.t(s.wait_duration),d:e.t(s.mobile.substr(s.mobile.length-4))}:{},{e:e.unref(r.img)(s.staff_headimg),f:e.t(s.goods_name),g:e.t(s.staff_name),h:e.t(s.goods_money),i:e.t(s.goods_vip_money),j:s.member},s.member?{k:"9ac96324-1-"+o+",9ac96324-0",l:e.p({src:e.unref(r.img)(s.member.headimg),size:"32",leftIcon:"none","default-url":e.unref(r.img)("static/resource/images/default_headimg.png")})}:{},{m:s.member},s.member?{n:e.t(s.member.nickname)}:{},{o:"9ac96324-2-"+o+",9ac96324-0",p:e.o((r=>e.unref(a.callPhone)(s.member.phone))),q:e.o((e=>h(s))),r:e.t(s.create_time),s:e.t(s.status_name.name),t:e.o((e=>h(s))),v:1==s.status},1==s.status?{w:e.o((e=>j(s,"cancel")))}:{},{x:t}))),d:e.p({name:"phone-fill",color:"var(--primary-color)",size:"28"}),e:!e.unref(c).length&&e.unref(m)},!e.unref(c).length&&e.unref(m)?{f:e.p({option:{icon:e.unref(r.img)("static/resource/images/empty.png")}})}:{},{g:e.sr("mescrollRef","9ac96324-0"),h:e.o(e.unref(u)),i:e.o(e.unref(l)),j:e.o(g),k:e.p({top:"114rpx"}),l:e.s(s.themeColor())})}});l.__runtimeHooks=1,tt.createPage(l);
