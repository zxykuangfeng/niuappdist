"use strict";const e=require("../../../../common/vendor.js"),r=require("../../../../locale/index.js"),o=require("../../../../utils/common.js"),s=require("../../utils/common.js"),t=require("../../api/store.js"),n=require("../../../../components/mescroll/hooks/useMescroll.js");if(require("../../../../locale/i18n.js"),require("../../../../locale/language.js"),require("../../../../utils/pages.js"),require("../../../../stores/system.js"),require("../../../../app/api/system.js"),require("../../../../utils/request.js"),require("../../../../stores/member.js"),require("../../../../app/api/member.js"),require("../../../../app/api/auth.js"),require("../../../../stores/config.js"),require("../../../../app/stores/diy.js"),require("../../../../hooks/useLogin.js"),!Array){(e.resolveComponent("u-icon")+e.resolveComponent("u--image"))()}Math||((()=>"../../../../node-modules/uview-plus/components/u-icon/u-icon.js")+(()=>"../../../../node-modules/uview-plus/components/u--image/u--image.js")+a+l)();const l=()=>"../../../../components/mescroll/mescroll-body/mescroll-body.js",a=()=>"../../../../components/mescroll/mescroll-empty/mescroll-empty.js",u=e.defineComponent({__name:"list",setup(l){const{mescrollInit:a,downCallback:u,getMescroll:i}=n.useMescroll(e.onPageScroll,e.onReachBottom);let c=e.ref([]);e.ref(""),e.ref("");let m=e.ref(null),p=e.ref(!1);const d=e.ref(0),g=e.ref(0);e.onLoad((async()=>{await s.getLoc().then((e=>{d.value=e.longitude,g.value=e.latitude}))}));const f=e=>{p.value=!1;let r={longitude:d.value,latitude:g.value,page:e.num,limit:e.size};t.getStoreList(r).then((r=>{let o=r.data.data;1==e.num&&(c.value=[]),c.value=c.value.concat(o),e.endSuccess(o.length),p.value=!0})).catch((()=>{p.value=!0,e.endErr()}))};return e.onMounted((()=>{setTimeout((()=>{i().optUp.textNoMore=r.t("end")}),500)})),(r,t)=>e.e({a:e.f(e.unref(c),((r,t,n)=>({a:"0a440558-2-"+n+",0a440558-1-"+n,b:"0a440558-1-"+n+",0a440558-0",c:e.p({width:"155rpx",height:"155rpx",src:e.unref(o.img)(r.store_logo),model:"aspectFill"}),d:e.t(r.store_name),e:e.t(e.unref(s.currStoreId)()==r.store_id?"当前门店":"选择门店"),f:"0a440558-3-"+n+",0a440558-0",g:e.t(r.address),h:e.t(e.unref(s.distanceFormat)(r.distance)),i:t,j:e.o((s=>{return t=r,e.index.setStorageSync("zzhc:store",t),void o.redirect({url:"/addon/zzhc/pages/index",mode:"reLaunch"});var t}))}))),b:e.p({name:"photo",color:"var(--primary-color-dark)",size:"50"}),c:e.p({name:"map",color:"var(--primary-color-dark)",size:"17"}),d:!e.unref(c).length&&e.unref(p)},!e.unref(c).length&&e.unref(p)?{e:e.p({option:{tip:"暂无门店"}})}:{},{f:e.sr(m,"0a440558-0",{k:"mescrollRef"}),g:e.o(e.unref(a)),h:e.o(e.unref(u)),i:e.o(f),j:e.s(r.themeColor())})}});u.__runtimeHooks=1,tt.createPage(u);
