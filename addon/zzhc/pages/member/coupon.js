"use strict";const e=require("../../../../common/vendor.js"),s=require("../../../../utils/common.js"),t=require("../../api/coupon.js"),r=require("../../../../components/mescroll/hooks/useMescroll.js");require("../../../../locale/i18n.js"),require("../../../../stores/system.js"),require("../../../../utils/pages.js"),require("../../../../app/stores/diy.js"),require("../../../../hooks/useLogin.js"),require("../../../../utils/request.js"),require("../../../../stores/member.js"),require("../../../../app/api/member.js"),require("../../../../app/api/auth.js"),require("../../../../stores/config.js"),require("../../../../locale/index.js"),require("../../../../locale/language.js"),require("../../../../app/api/system.js"),Math||(l+a)();const a=()=>"../../../../components/mescroll/mescroll-body/mescroll-body.js",l=()=>"../../../../components/mescroll/mescroll-empty/mescroll-empty.js",o=e.defineComponent({__name:"coupon",setup(a){const{mescrollInit:l,downCallback:o,getMescroll:u}=r.useMescroll(e.onPageScroll,e.onReachBottom),n=e.ref([]),i=e.ref(!1),m=[{status:1,name:"待使用"},{status:2,name:"已使用"},{status:3,name:"已过期"}],c=e.ref(1),p=e=>{i.value=!1;let s={page:e.num,limit:e.size,status:c.value};t.getMyCouponList(s).then((s=>{let t=s.data.data;1==e.num&&(n.value=[]),n.value=n.value.concat(t),e.endSuccess(t.length),i.value=!0})).catch((()=>{i.value=!0,e.endErr()}))};return(t,r)=>e.e({a:e.f(e.unref(m),((s,t,r)=>({a:e.t(s.name),b:e.n({"class-select":c.value===s.status}),c:e.o((e=>{return t=s.status,c.value=t,n.value=[],void u().resetUpScroll();var t}))}))),b:n.value.length},n.value.length?{c:e.f(n.value,((t,r,a)=>1!=c.value?e.e({a:e.t(t.money),b:"0.00"===t.atleast},"0.00"===t.atleast?{}:{c:e.t(t.atleast)},{d:e.t(t.name),e:e.t(t.expire_time?t.expire_time.slice(0,10):"永久有效"),f:e.t(e.unref(m)[c.value-1].name),g:r?1:""}):e.e({h:e.t(t.money),i:"0.00"===t.atleast},"0.00"===t.atleast?{}:{j:e.t(t.atleast)},{k:e.t(t.name),l:e.t(t.expire_time?t.expire_time.slice(0,10):"永久有效"),m:e.n(1===c.value?"mr-[9rpx]":"mr-[34rpx]"),n:1===c.value},1===c.value?{o:e.o((e=>{s.redirect({url:"/addon/zzhc/pages/order/list"})}))}:{},{p:r?1:""}))),d:1!=c.value}:{},{e:!n.value.length&&i.value},!n.value.length&&i.value?{f:e.p({option:{icon:e.unref(s.img)("static/resource/images/empty.png")}})}:{},{g:e.sr("mescrollRef","3195321f-0"),h:e.o(e.unref(l)),i:e.o(e.unref(o)),j:e.o(p),k:e.p({top:"90rpx"}),l:e.s(t.themeColor())})}});o.__runtimeHooks=1,tt.createPage(o);
