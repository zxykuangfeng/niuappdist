"use strict";const e=require("../../../../../common/vendor.js"),o=require("../../../../../utils/common.js"),t=require("../../../utils/common.js"),r=require("../../../../../app/stores/diy.js"),a=require("../../../api/store.js"),s=require("../../../utils/map/openMap.js");if(require("../../../../../utils/pages.js"),require("../../../../../stores/member.js"),require("../../../../../app/api/member.js"),require("../../../../../utils/request.js"),require("../../../../../locale/index.js"),require("../../../../../locale/i18n.js"),require("../../../../../locale/language.js"),require("../../../../../stores/system.js"),require("../../../../../app/api/system.js"),require("../../../../../stores/config.js"),require("../../../../../app/api/auth.js"),require("../../../../../hooks/useLogin.js"),require("../../../utils/map/transformCoordinate.js"),!Array){(e.resolveComponent("u-icon")+e.resolveComponent("u--image")+e.resolveComponent("u-empty"))()}Math||((()=>"../../../../../node-modules/uview-plus/components/u-icon/u-icon.js")+(()=>"../../../../../node-modules/uview-plus/components/u--image/u--image.js")+(()=>"../../../../../node-modules/uview-plus/components/u-empty/u-empty.js"))();const u=e.defineComponent({__name:"index",props:["component","index","pullDownRefreshCount"],setup(u){const i=u,n=r.useDiyStore(),d=e.ref({}),l=e.ref([]),p=e.ref(!0),m=e.computed((()=>"decorate"==n.mode?n.value[i.index]:i.component)),c=e.computed((()=>{var e="";return m.value.componentBgColor&&(e+="background-color:"+m.value.componentBgColor+";"),m.value.topRounded&&(e+="border-top-left-radius:"+2*m.value.topRounded+"rpx;"),m.value.topRounded&&(e+="border-top-right-radius:"+2*m.value.topRounded+"rpx;"),m.value.bottomRounded&&(e+="border-bottom-left-radius:"+2*m.value.bottomRounded+"rpx;"),m.value.bottomRounded&&(e+="border-bottom-right-radius:"+2*m.value.bottomRounded+"rpx;"),e}));e.watch((()=>i.pullDownRefreshCount),((e,o)=>{})),e.onMounted((()=>{v(),"decorate"==n.mode&&e.watch((()=>m.value),((e,o)=>{e&&"ZzhcStoreStaff"==e.componentName&&v()}))}));const v=async()=>{if("decorate"==n.mode){d.value={store_id:1,store_logo:"",store_name:"门店名称",address:"门店地址",trade_time:"营业时间",distance:"800"};let e={staff_headimg:"",staff_name:"理发师姓名",staff_position:"理发师职位",people:0,time:0};l.value.push(e),p.value=!1}else{let e=t.currStoreId(!1);console.log("storeId",e),t.getLoc().then((o=>{console.log("res",o),g({store_id:e,longitude:o.longitude,latitude:o.latitude})}),(o=>{console.log("res",o),g({store_id:e,longitude:0,latitude:0})}))}},g=o=>{let t={store_id:o.store_id??0,latitude:o.latitude??"",longitude:o.longitude??"",source:m.value.store.source,num:m.value.staff.num};a.getStoreStaffComponents(t).then((o=>{p.value=!1,l.value=o.data.barber_list,d.value=o.data.store_info,t.store_id||e.index.setStorageSync("zzhc:store",o.data.store_info)}))},f=()=>{o.redirect({url:"/addon/zzhc/pages/barber/list",mode:"navigateTo"})},h=()=>{o.redirect({url:"/addon/zzhc/pages/store/list",mode:"navigateTo"})};return(r,a)=>e.e({a:!p.value&&d.value.store_id},!p.value&&d.value.store_id?e.e({b:e.p({name:"photo",color:"var(--primary-color-dark)",size:"50",sh:!0}),c:e.p({src:e.unref(o.img)(d.value.store_logo),shape:"circle",width:"72rpx",height:"72rpx"}),d:e.t(d.value.store_name),e:e.p({name:"map",color:"var(--primary-color-dark)",size:"17"}),f:e.t(d.value.address),g:e.p({name:"clock",color:"var(--primary-color-dark)",size:"15"}),h:e.t(d.value.trade_time),i:e.o((e=>{return t=d.value.store_id,void o.redirect({url:"/addon/zzhc/pages/store/detail?store_id="+t,mode:"navigateTo"});var t})),j:e.o(h),k:e.t(e.unref(t.distanceFormat)(d.value.distance)),l:e.unref(o.img)("/addon/zzhc/dh.png"),m:e.o((o=>e.unref(s.openMap).openMap(d.value.latitude,d.value.longitude,d.value.full_address))),n:e.unref(o.img)("/addon/zzhc/phone.png"),o:e.o((o=>e.unref(t.callPhone)(d.value.store_mobile))),p:e.p({name:"arrow-right",size:"15"}),q:e.o(f),r:e.f(l.value,((t,r,a)=>e.e({a:"41f3db08-6-"+a+",41f3db08-5-"+a,b:"41f3db08-5-"+a,c:e.p({width:"175rpx",height:"175rpx",src:e.unref(o.img)(t.staff_headimg),model:"aspectFill"}),d:e.t(t.staff_name),e:e.t(t.staff_position),f:e.t(t.wait_people),g:e.t(t.wait_duration),h:null!=t.work&&("working"==t.work.status||"meal"==t.work.status||"thing"==t.work.status)},null==t.work||"working"!=t.work.status&&"meal"!=t.work.status&&"thing"!=t.work.status?(null!=t.work&&t.work.status,{}):{i:e.o((e=>{return r=t.staff_id,void o.redirect({url:"/addon/zzhc/pages/goods/select?staff_id="+r,mode:"navigateTo"});var r}))},{j:null!=t.work&&"stop"==t.work.status,k:r,l:e.o((e=>{return r=t.staff_id,void o.redirect({url:"/addon/zzhc/pages/barber/detail?staff_id="+r,mode:"navigateTo"});var r}))}))),s:e.p({name:"photo",color:"var(--primary-color-dark)",size:"50"}),t:0==l.value.length},0==l.value.length?{v:e.p({mode:"data",text:"暂无发型师"})}:{}):{w:e.o(h)},{x:e.s(e.unref(c))})}});tt.createComponent(u);
